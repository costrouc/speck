"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(void 0,function(){function e(){var e=new ve(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function t(e,t){var n=t[0],o=t[1],r=t[2],a=t[3],i=t[4],s=t[5],l=t[6],u=t[7],m=t[8],c=t[9],d=t[10],f=t[11],h=t[12],p=t[13],v=t[14],b=t[15],g=n*s-o*i,_=n*l-r*i,y=n*u-a*i,w=o*l-r*s,S=o*u-a*s,x=r*u-a*l,M=m*p-c*h,D=m*v-d*h,I=m*b-f*h,E=c*v-d*p,F=c*b-f*p,R=d*b-f*v,A=g*R-_*F+y*E+w*I-S*D+x*M;return A?(A=1/A,e[0]=(s*R-l*F+u*E)*A,e[1]=(r*F-o*R-a*E)*A,e[2]=(p*x-v*S+b*w)*A,e[3]=(d*S-c*x-f*w)*A,e[4]=(l*I-i*R-u*D)*A,e[5]=(n*R-r*I+a*D)*A,e[6]=(v*y-h*x-b*_)*A,e[7]=(m*x-d*y+f*_)*A,e[8]=(i*F-s*I+u*M)*A,e[9]=(o*I-n*F-a*M)*A,e[10]=(h*S-p*y+b*g)*A,e[11]=(c*y-m*S-f*g)*A,e[12]=(s*D-i*E-l*M)*A,e[13]=(n*E-o*D+r*M)*A,e[14]=(p*_-h*w-v*g)*A,e[15]=(m*w-c*_+d*g)*A,e):null}function n(e,t,n){var o=t[0],r=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=t[6],m=t[7],c=t[8],d=t[9],f=t[10],h=t[11],p=t[12],v=t[13],b=t[14],g=t[15],_=n[0],y=n[1],w=n[2],S=n[3];return e[0]=_*o+y*s+w*c+S*p,e[1]=_*r+y*l+w*d+S*v,e[2]=_*a+y*u+w*f+S*b,e[3]=_*i+y*m+w*h+S*g,_=n[4],y=n[5],w=n[6],S=n[7],e[4]=_*o+y*s+w*c+S*p,e[5]=_*r+y*l+w*d+S*v,e[6]=_*a+y*u+w*f+S*b,e[7]=_*i+y*m+w*h+S*g,_=n[8],y=n[9],w=n[10],S=n[11],e[8]=_*o+y*s+w*c+S*p,e[9]=_*r+y*l+w*d+S*v,e[10]=_*a+y*u+w*f+S*b,e[11]=_*i+y*m+w*h+S*g,_=n[12],y=n[13],w=n[14],S=n[15],e[12]=_*o+y*s+w*c+S*p,e[13]=_*r+y*l+w*d+S*v,e[14]=_*a+y*u+w*f+S*b,e[15]=_*i+y*m+w*h+S*g,e}function o(e,t,n){var o,r,a,i,s,l,u,m,c,d,f,h,p=n[0],v=n[1],b=n[2];return t===e?(e[12]=t[0]*p+t[4]*v+t[8]*b+t[12],e[13]=t[1]*p+t[5]*v+t[9]*b+t[13],e[14]=t[2]*p+t[6]*v+t[10]*b+t[14],e[15]=t[3]*p+t[7]*v+t[11]*b+t[15]):(o=t[0],r=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=t[6],m=t[7],c=t[8],d=t[9],f=t[10],h=t[11],e[0]=o,e[1]=r,e[2]=a,e[3]=i,e[4]=s,e[5]=l,e[6]=u,e[7]=m,e[8]=c,e[9]=d,e[10]=f,e[11]=h,e[12]=o*p+s*v+c*b+t[12],e[13]=r*p+l*v+d*b+t[13],e[14]=a*p+u*v+f*b+t[14],e[15]=i*p+m*v+h*b+t[15]),e}function r(e,t,n){var o=Math.sin(n),r=Math.cos(n),a=t[4],i=t[5],s=t[6],l=t[7],u=t[8],m=t[9],c=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*r+u*o,e[5]=i*r+m*o,e[6]=s*r+c*o,e[7]=l*r+d*o,e[8]=u*r-a*o,e[9]=m*r-i*o,e[10]=c*r-s*o,e[11]=d*r-l*o,e}function a(e,t,n){var o=Math.sin(n),r=Math.cos(n),a=t[0],i=t[1],s=t[2],l=t[3],u=t[8],m=t[9],c=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r-u*o,e[1]=i*r-m*o,e[2]=s*r-c*o,e[3]=l*r-d*o,e[8]=a*o+u*r,e[9]=i*o+m*r,e[10]=s*o+c*r,e[11]=l*o+d*r,e}function i(e,t){var n,o,r,a,i,s,l,u,m,c,d=SIMD.Float32x4.load(t,0),f=SIMD.Float32x4.load(t,4),h=SIMD.Float32x4.load(t,8),p=SIMD.Float32x4.load(t,12);return i=SIMD.Float32x4.shuffle(d,f,0,1,4,5),o=SIMD.Float32x4.shuffle(h,p,0,1,4,5),n=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.shuffle(d,f,2,3,6,7),a=SIMD.Float32x4.shuffle(h,p,2,3,6,7),r=SIMD.Float32x4.shuffle(i,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,i,1,3,5,7),i=SIMD.Float32x4.mul(r,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.mul(o,i),l=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),s),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(o,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),s),m=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,i)),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,2,3,0,1),a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),r=SIMD.Float32x4.swizzle(r,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),s),u=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(r,i)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),u),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),m),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),u),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.mul(n,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,i)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),l),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),i=SIMD.Float32x4.mul(n,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),l),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(o,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(a,i)),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),m),c=SIMD.Float32x4.mul(n,s),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),i=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(i,i))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(c,s)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(c,l)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(c,u)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(c,m)),e):null}function s(e,t,n){var o=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4.load(n,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),i))));SIMD.Float32x4.store(e,0,l);var u=SIMD.Float32x4.load(n,4),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(e,4,m);var c=SIMD.Float32x4.load(n,8),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),i))));SIMD.Float32x4.store(e,8,d);var f=SIMD.Float32x4.load(n,12),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),i))));return SIMD.Float32x4.store(e,12,h),e}function l(e,t,n){var o=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4(n[0],n[1],n[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,0,0,0,0)),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,1,1,1,1)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(s,2,2,2,2));var l=SIMD.Float32x4.add(o,SIMD.Float32x4.add(r,SIMD.Float32x4.add(a,i)));return SIMD.Float32x4.store(e,12,l),e}function u(e,t,n){var o=SIMD.Float32x4.splat(Math.sin(n)),r=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var a=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,r),SIMD.Float32x4.mul(i,o))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,r),SIMD.Float32x4.mul(a,o))),e}function m(e,t,n){var o=SIMD.Float32x4.splat(Math.sin(n)),r=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var a=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,r),SIMD.Float32x4.mul(i,o))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),e}function c(){var e=new ve(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function d(e){var t=new ve(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function f(e,t,n,o,r,a,i,s,l,u,m,c,d,f,h,p){var v=new ve(16);return v[0]=e,v[1]=t,v[2]=n,v[3]=o,v[4]=r,v[5]=a,v[6]=i,v[7]=s,v[8]=l,v[9]=u,v[10]=m,v[11]=c,v[12]=d,v[13]=f,v[14]=h,v[15]=p,v}function h(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function p(e,t,n,o){var r,a,i,s,l,u,m,c,d,f,h,p,v,b,g,_,y,w,S,x,M,D,I,E,F=o[0],R=o[1],A=o[2],T=Math.sqrt(F*F+R*R+A*A);return Math.abs(T)<pe?null:(T=1/T,F*=T,R*=T,A*=T,r=Math.sin(n),a=Math.cos(n),i=1-a,s=t[0],l=t[1],u=t[2],m=t[3],c=t[4],d=t[5],f=t[6],h=t[7],p=t[8],v=t[9],b=t[10],g=t[11],_=F*F*i+a,y=R*F*i+A*r,w=A*F*i-R*r,S=F*R*i-A*r,x=R*R*i+a,M=A*R*i+F*r,D=F*A*i+R*r,I=R*A*i-F*r,E=A*A*i+a,e[0]=s*_+c*y+p*w,e[1]=l*_+d*y+v*w,e[2]=u*_+f*y+b*w,e[3]=m*_+h*y+g*w,e[4]=s*S+c*x+p*M,e[5]=l*S+d*x+v*M,e[6]=u*S+f*x+b*M,e[7]=m*S+h*x+g*M,e[8]=s*D+c*I+p*E,e[9]=l*D+d*I+v*E,e[10]=u*D+f*I+b*E,e[11]=m*D+h*I+g*E,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function v(e,t,n,o,r,a,i){var s=1/(t-n),l=1/(o-r),u=1/(a-i);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(r+o)*l,e[14]=(i+a)*u,e[15]=1,e}function b(e,t,n,o){var r,a,i,s,l,u,m,c,d,f,p=t[0],v=t[1],b=t[2],g=o[0],_=o[1],y=o[2],w=n[0],S=n[1],x=n[2];return Math.abs(p-w)<pe&&Math.abs(v-S)<pe&&Math.abs(b-x)<pe?h(e):(m=p-w,c=v-S,d=b-x,f=1/Math.sqrt(m*m+c*c+d*d),m*=f,c*=f,d*=f,r=_*d-y*c,a=y*m-g*d,i=g*c-_*m,f=Math.sqrt(r*r+a*a+i*i),f?(f=1/f,r*=f,a*=f,i*=f):(r=0,a=0,i=0),s=c*i-d*a,l=d*r-m*i,u=m*a-c*r,f=Math.sqrt(s*s+l*l+u*u),f?(f=1/f,s*=f,l*=f,u*=f):(s=0,l=0,u=0),e[0]=r,e[1]=s,e[2]=m,e[3]=0,e[4]=a,e[5]=l,e[6]=c,e[7]=0,e[8]=i,e[9]=u,e[10]=d,e[11]=0,e[12]=-(r*p+a*v+i*b),e[13]=-(s*p+l*v+u*b),e[14]=-(m*p+c*v+d*b),e[15]=1,e)}function g(){var e=new ve(3);return e[0]=0,e[1]=0,e[2]=0,e}function _(e,t,n){var o=new ve(3);return o[0]=e,o[1]=t,o[2]=n,o}function y(e,t){var n=t[0]-e[0],o=t[1]-e[1],r=t[2]-e[2];return Math.sqrt(n*n+o*o+r*r)}function w(e){var t=e[0],n=e[1],o=e[2];return Math.sqrt(t*t+n*n+o*o)}function S(e,t){var n=t[0],o=t[1],r=t[2],a=n*n+o*o+r*r;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}function x(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function M(e,t,n){var o=t[0],r=t[1],a=t[2],i=n[0],s=n[1],l=n[2];return e[0]=r*l-a*s,e[1]=a*i-o*l,e[2]=o*s-r*i,e}function D(e,t){t=t||1;var n=2*be()*Math.PI,o=2*be()-1,r=Math.sqrt(1-o*o)*t;return e[0]=Math.cos(n)*r,e[1]=Math.sin(n)*r,e[2]=o*t,e}function I(){var e=new ve(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function E(e,t,n,o){var r=new ve(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=o,r}function F(e,t){var n=t[0],o=t[1],r=t[2],a=t[3],i=n*n+o*o+r*r+a*a;return i>0&&(i=1/Math.sqrt(i),e[0]=n*i,e[1]=o*i,e[2]=r*i,e[3]=a*i),e}function R(e,t,n){var o=t[0],r=t[1],a=t[2],i=t[3];return e[0]=n[0]*o+n[4]*r+n[8]*a+n[12]*i,e[1]=n[1]*o+n[5]*r+n[9]*a+n[13]*i,e[2]=n[2]*o+n[6]*r+n[10]*a+n[14]*i,e[3]=n[3]*o+n[7]*r+n[11]*a+n[15]*i,e}function A(){var e=new ve(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function T(e,t,n){n=.5*n;var o=Math.sin(n);return e[0]=o*t[0],e[1]=o*t[1],e[2]=o*t[2],e[3]=Math.cos(n),e}function C(e,t,n,o){var r,a,i,s,l,u=t[0],m=t[1],c=t[2],d=t[3],f=n[0],h=n[1],p=n[2],v=n[3];return a=u*f+m*h+c*p+d*v,a<0&&(a=-a,f=-f,h=-h,p=-p,v=-v),1-a>1e-6?(r=Math.acos(a),i=Math.sin(r),s=Math.sin((1-o)*r)/i,l=Math.sin(o*r)/i):(s=1-o,l=o),e[0]=s*u+l*f,e[1]=s*m+l*h,e[2]=s*c+l*p,e[3]=s*d+l*v,e}function P(e,t){var n,o=t[0]+t[4]+t[8];if(o>0)n=Math.sqrt(o+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);var a=(r+1)%3,i=(r+2)%3;n=Math.sqrt(t[3*r+r]-t[3*a+a]-t[3*i+i]+1),e[r]=.5*n,n=.5/n,e[3]=(t[3*a+i]-t[3*i+a])*n,e[a]=(t[3*a+r]+t[3*r+a])*n,e[i]=(t[3*i+r]+t[3*r+i])*n}return e}function L(){var e=new ve(2);return e[0]=0,e[1]=0,e}function N(e){for(var t=e.split("\n"),n=parseInt(t[0]),o=Math.floor(t.length/(n+2)),r=[],a=0;a<o;a++){for(var i=[],s=0;s<n;s++){for(var l=t[a*(n+2)+s+2].split(/\s+/),u={},m=0;""==l[m];)m++;u.symbol=l[m++],u.position=[parseFloat(l[m++]),parseFloat(l[m++]),parseFloat(l[m++])],i.push(u)}r.push(i)}return r}function U(e,t){var n={};for(var o in t)n[o]={buffer:new k(e),size:t[o]};return n}function O(e,t){for(var n={},o=0;o<t.length;o++){var r=e.getExtension(t[o]);if(null===r)throw"Extension "+t[o]+" not available.";n[t[o]]=r}return n}function z(e,t,n,o){var r=this;r.initialize=function(){if(r.fb=e.createFramebuffer(),r.bind(),t.length>1){for(var a=[],i=0;i<t.length;i++)a.push(o["COLOR_ATTACHMENT"+i+"_WEBGL"]);o.drawBuffersWEBGL(a);for(var i=0;i<t.length;i++)e.framebufferTexture2D(e.FRAMEBUFFER,o["COLOR_ATTACHMENT"+i+"_WEBGL"],e.TEXTURE_2D,t[i].texture,0)}else e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t[0].texture,0);void 0!==n&&e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,n.texture,0)},r.bind=function(){e.bindFramebuffer(e.FRAMEBUFFER,r.fb)},r.initialize()}function B(e,t,n,o,r,a){a=a||{},a.target=a.target||e.TEXTURE_2D,a.mag=a.mag||e.NEAREST,a.min=a.min||e.NEAREST,a.wraps=a.wraps||e.CLAMP_TO_EDGE,a.wrapt=a.wrapt||e.CLAMP_TO_EDGE,a.internalFormat=a.internalFormat||e.RGBA,a.format=a.format||e.RGBA,a.type=a.type||e.UNSIGNED_BYTE;var i=this;i.initialize=function(){i.index=t,i.activate(),i.texture=e.createTexture(),i.bind(),e.texParameteri(a.target,e.TEXTURE_MAG_FILTER,a.mag),e.texParameteri(a.target,e.TEXTURE_MIN_FILTER,a.min),e.texParameteri(a.target,e.TEXTURE_WRAP_S,a.wraps),e.texParameteri(a.target,e.TEXTURE_WRAP_T,a.wrapt),e.texImage2D(a.target,0,a.internalFormat,o,r,0,a.format,a.type,n)},i.bind=function(){e.bindTexture(a.target,i.texture)},i.activate=function(){e.activeTexture(e.TEXTURE0+i.index)},i.reset=function(){i.activate(),i.bind(),e.texImage2D(a.target,0,a.internalFormat,o,r,0,a.format,a.type,n)},i.initialize()}function k(e){var t=this;t.initialize=function(){t.buffer=e.createBuffer()},t.bind=function(){e.bindBuffer(e.ARRAY_BUFFER,t.buffer)},t.set=function(n){t.bind(),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)},t.initialize()}function H(e,t,n,o){var r=this;r.primitiveCount=o,r.initialize=function(){},r.render=function(){t.use();for(name in n){var a=n[name].buffer,i=n[name].size;try{var s=t.attribs[name].location}catch(e){throw console.log("Could not find location for",name),e}a.bind(),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,i,e.FLOAT,!1,0,0)}e.drawArrays(e.TRIANGLES,0,3*o);for(name in r.buffers)e.disableVertexAttribArray(t.attributes[name].location)},r.initialize()}function j(e,t,n){var o=this;o.initialize=function(){o.program=o.compileProgram(t,n),o.attribs=o.gatherAttribs(),o.uniforms=o.gatherUniforms()},o.use=function(){e.useProgram(o.program)},o.compileProgram=function(t,n){var r=o.compileShader(t,e.VERTEX_SHADER),a=o.compileShader(n,e.FRAGMENT_SHADER),i=e.createProgram();if(e.attachShader(i,r),e.attachShader(i,a),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(i)),"Failed to compile program.";return i},o.compileShader=function(t,n){var o=e.createShader(n);if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var r=e.getShaderInfoLog(o),a=parseInt(r.split(":")[2]),i=t.split("\n");for(var s in i){var l=parseInt(s);console.log(l+"  "+i[s]),s==a-1&&console.warn(r)}var u=n==e.VERTEX_SHADER?"vertex":"fragment";throw"Failed to compile "+u+" shader."}return o},o.setUniform=function(t,n,r){var a=Array.prototype.slice.call(arguments,2);o.use();try{var i=o.uniforms[t].location}catch(e){throw console.log(t),e}e["uniform"+n].apply(e,[i].concat(a))},o.gatherUniforms=function(){for(var t={},n=e.getProgramParameter(o.program,e.ACTIVE_UNIFORMS),r=0;r<n;r++){var a=e.getActiveUniform(o.program,r);t[a.name]={name:a.name,location:e.getUniformLocation(o.program,a.name),type:a.type,size:a.size}}return t},o.gatherAttribs=function(){for(var t={},n=e.getProgramParameter(o.program,e.ACTIVE_ATTRIBUTES),r=0;r<n;r++){var a=e.getActiveAttrib(o.program,r);t[a.name]={name:a.name,location:e.getAttribLocation(o.program,a.name),type:a.type,size:a.size}}return t},o.initialize()}function q(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e}function X(e,t,n){var o=new XMLHttpRequest;o.open("GET",e,!0),o.onload=function(){o.status>=200&&o.status<400?t(o.responseText):n()},o.onerror=function(){throw"Connection Error for ajax get request"},o.send()}function W(e,t,n){return Math.min(t,Math.max(e,n))}function V(){return q({aspect:1,zoom:.125,translation:{x:0,y:0},rotation:c(),resolution:400},Ee.atoms)}function G(e,t){for(var n=-(1/0),o=1/0,r=-(1/0),a=1/0,i=0;i<t.atoms.length;i++){var s=t.atoms[i],l=Be[s.symbol].radius;l=2.5*e.atomScale*(1+(l-1)*e.relativeAtomScale);var u=E(s.x,s.y,s.z,0);R(u,u,e.rotation),n=Math.max(n,u[0]+l),o=Math.min(o,u[0]-l),r=Math.max(r,u[1]+l),a=Math.min(a,u[1]-l)}var m=o+(n-o)/2,c=a+(r-a)/2;e.translation.x=m,e.translation.y=c;var d=Math.max(n-o,r-a);e.zoom=1/(1.01*d)}function Y(e){return Z(K(e))}function K(e){return JSON.stringify(e)}function Z(e){return e=JSON.parse(e),e.rotation=d(e.rotation),e}function J(e){e.dofStrength=W(0,1,e.dofStrength),e.dofPosition=W(0,1,e.dofPosition),e.zoom=W(.001,2,e.zoom),e.atomScale=W(0,1,e.atomScale),e.relativeAtomScale=W(0,1,e.relativeAtomScale),e.bondScale=W(0,1,e.bondScale),e.bondShade=W(0,1,e.bondShade),e.atomShade=W(0,1,e.atomShade),e.ao=W(0,1,e.ao),e.brightness=W(0,1,e.brightness),e.outline=W(0,1,e.outline)}function $(e,t,n){e.translation.x-=t/(e.resolution*e.zoom),e.translation.y+=n/(e.resolution*e.zoom),J(e)}function Q(e,t,n){var o=c();De(o,o,.005*t),Me(o,o,.005*n),Se(e.rotation,o,e.rotation),J(e)}function ee(e){var t=1/e.zoom,n=t/e.aspect,o=-n/2+e.translation.y,r=n/2+e.translation.y,a=-t/2+e.translation.x,i=t/2+e.translation.x;return{bottom:o,top:r,left:a,right:i}}function te(e){return e.bondScale*e.atomScale*(1+(ke-1)*e.relativeAtomScale)}function ne(){return{atoms:[],farAtom:void 0,bonds:[],lattice:{}}}function oe(e){function t(t,n){e.lattice.edges.push({posA:{x:t[0],y:t[1],z:t[2]},posB:{x:n[0],y:n[1],z:n[2]},radA:a,radB:a,colA:{r:r[0],g:r[1],b:r[2]},colB:{r:r[0],g:r[1],b:r[2]},cutoff:1})}function n(t){e.lattice.points.push({position:t,color:r,radius:a})}var o=e.lattice.matrix,r=[.1,.1,.1],a=.03;e.lattice.edges=[],e.lattice.points=[];var i=[o[3],o[7],o[11]],s=_(0+i[0],0+i[1],0+i[2]),l=_(o[0]+i[0],o[1]+i[1],o[2]+i[2]),u=_(o[4]+i[0],o[5]+i[1],o[6]+i[2]),m=_(o[8]+i[0],o[9]+i[1],o[10]+i[2]),c=_(o[0]+o[4]+i[0],o[1]+o[5]+i[1],o[2]+o[6]+i[2]),d=_(o[0]+o[8]+i[0],o[1]+o[9]+i[1],o[2]+o[10]+i[2]),f=_(o[4]+o[8]+i[0],o[5]+o[9]+i[1],o[6]+o[10]+i[2]),h=_(o[0]+o[4]+o[8]+i[0],o[1]+o[5]+o[9]+i[1],o[2]+o[6]+o[10]+i[2]);n(s),n(l),n(u),n(m),n(c),n(d),n(f),n(h),t(s,l),t(s,u),t(s,m),t(c,u),t(c,l),t(c,h),t(f,h),t(f,m),t(f,u),t(d,m),t(d,h),t(d,l)}function re(e){var t=[],n=e.atoms.slice();n.sort(function(e,t){return e.z-t.z});for(var o=0;o<n.length;o++)for(var r=n[o],a=o+1;a<n.length&&n[a].z<n[o].z+5*He;){var i=n[a],s=_(r.x,r.y,r.z),l=_(i.x,i.y,i.z),u=y(s,l),m=Be[r.symbol],c=Be[i.symbol];u<2.5*(m.radius+c.radius)&&t.push({posA:{x:r.x,y:r.y,z:r.z},posB:{x:i.x,y:i.y,z:i.z},radA:m.radius,radB:c.radius,colA:{r:m.color[0],g:m.color[1],b:m.color[2]},colB:{r:c.color[0],g:c.color[1],b:c.color[2]},cutoff:u/(m.radius+c.radius)}),a++}t.sort(function(e,t){return e.cutoff-t.cutoff}),e.bonds=t}function ae(e,t,n,o,r){e.atoms.push({symbol:t,x:n,y:o,z:r})}function ie(e){for(var t=0,n=0,o=0,r=0;r<e.atoms.length;r++)t+=e.atoms[r].x,n+=e.atoms[r].y,o+=e.atoms[r].z;return{x:t/e.atoms.length,y:n/e.atoms.length,z:o/e.atoms.length}}function se(e){for(var t=ie(e),n=0;n<e.atoms.length;n++){var o=e.atoms[n];o.x-=t.x,o.y-=t.y,o.z-=t.z}e.lattice.matrix[3]-=t.x,e.lattice.matrix[7]-=t.y,e.lattice.matrix[11]-=t.z}function le(e){if(void 0!==e.farAtom)return e.farAtom;e.farAtom=e.atoms[0];for(var t=0,n=0;n<e.atoms.length;n++){var o=e.atoms[n],r=Be[o.symbol].radius,a=2.5*Math.sqrt(r*r+r*r+r*r),i=Math.sqrt(o.x*o.x+o.y*o.y+o.z*o.z)+a;i>t&&(t=i,e.farAtom=o)}return e.farAtom}function ue(e){var t=le(e),n=He,o=2.5*Math.sqrt(n*n+n*n+n*n);return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)+o}function me(e,t,n){function o(e){ie=!0,m.viewport(0,0,t,t),F.bind(),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT);var n=ee(e),o=c();v(o,n.left,n.right,n.bottom,n.top,0,s);var r=c();b(r,[0,0,0],[0,0,-1],[0,1,0]);var a=c();xe(a,a,[0,0,-s/2]),Se(a,a,e.rotation),N.setUniform("uProjection","Matrix4fv",!1,o),N.setUniform("uView","Matrix4fv",!1,r),N.setUniform("uModel","Matrix4fv",!1,a),N.setUniform("uBottomLeft","2fv",[n.left,n.bottom]),N.setUniform("uTopRight","2fv",[n.right,n.top]),N.setUniform("uAtomScale","1f",2.5*e.atomScale),N.setUniform("uRelativeAtomScale","1f",e.relativeAtomScale),N.setUniform("uRes","1f",t),N.setUniform("uDepth","1f",s),N.setUniform("uMode","1i",0),N.setUniform("uAtomShade","1f",e.atomShade),Z.render(),(e.bonds||e.lattice)&&null!=J&&(F.bind(),k.setUniform("uProjection","Matrix4fv",!1,o),k.setUniform("uView","Matrix4fv",!1,r),k.setUniform("uModel","Matrix4fv",!1,a),k.setUniform("uRotation","Matrix4fv",!1,e.rotation),k.setUniform("uDepth","1f",s),k.setUniform("uBottomLeft","2fv",[n.left,n.bottom]),k.setUniform("uTopRight","2fv",[n.right,n.top]),k.setUniform("uRes","1f",t),k.setUniform("uBondShade","1f",e.bondShade),k.setUniform("uAtomScale","1f",2.5*e.atomScale),k.setUniform("uRelativeAtomScale","1f",e.relativeAtomScale),k.setUniform("uMode","1i",0),J.render())}function r(e){se=!0,m.viewport(0,0,t,t),R.bind(),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT);var n=ee(e),o=c();v(o,n.left,n.right,n.bottom,n.top,0,s);var r=c();b(r,[0,0,0],[0,0,-1],[0,1,0]);var a=c();xe(a,a,[0,0,-s/2]),Se(a,a,e.rotation),N.setUniform("uProjection","Matrix4fv",!1,o),N.setUniform("uView","Matrix4fv",!1,r),N.setUniform("uModel","Matrix4fv",!1,a),N.setUniform("uBottomLeft","2fv",[n.left,n.bottom]),N.setUniform("uTopRight","2fv",[n.right,n.top]),N.setUniform("uAtomScale","1f",2.5*e.atomScale),N.setUniform("uRelativeAtomScale","1f",e.relativeAtomScale),N.setUniform("uRes","1f",t),N.setUniform("uDepth","1f",s),N.setUniform("uMode","1i",1),N.setUniform("uAtomShade","1f",e.atomShade),Z.render(),(e.bonds||e.lattice)&&null!=J&&(R.bind(),k.setUniform("uProjection","Matrix4fv",!1,o),k.setUniform("uView","Matrix4fv",!1,r),k.setUniform("uModel","Matrix4fv",!1,a),k.setUniform("uRotation","Matrix4fv",!1,e.rotation),k.setUniform("uDepth","1f",s),k.setUniform("uBottomLeft","2fv",[n.left,n.bottom]),k.setUniform("uTopRight","2fv",[n.right,n.top]),k.setUniform("uRes","1f",t),k.setUniform("uBondShade","1f",e.bondShade),k.setUniform("uAtomScale","1f",2.5*e.atomScale),k.setUniform("uRelativeAtomScale","1f",e.relativeAtomScale),k.setUniform("uMode","1i",1),J.render())}function a(e){m.viewport(0,0,n,n);var o=Y(e);o.zoom=1/s,o.translation.x=0,o.translation.y=0;for(var r=c(),a=0;a<3;a++){var i=D(g(),1);p(r,r,10*Math.random(),i)}o.rotation=Se(c(),r,o.rotation),A.bind(),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT);var l=ee(o),u=c();v(u,l.left,l.right,l.bottom,l.top,0,s);var d=c();b(d,[0,0,0],[0,0,-1],[0,1,0]);var y=c();xe(y,y,[0,0,-s/2]),Se(y,y,o.rotation),N.setUniform("uProjection","Matrix4fv",!1,u),N.setUniform("uView","Matrix4fv",!1,d),N.setUniform("uModel","Matrix4fv",!1,y),N.setUniform("uBottomLeft","2fv",[l.left,l.bottom]),N.setUniform("uTopRight","2fv",[l.right,l.top]),N.setUniform("uAtomScale","1f",2.5*o.atomScale),N.setUniform("uRelativeAtomScale","1f",e.relativeAtomScale),N.setUniform("uRes","1f",n),N.setUniform("uDepth","1f",s),N.setUniform("uMode","1i",0),N.setUniform("uAtomShade","1f",e.atomShade),Z.render(),(e.bonds||e.lattice)&&null!=J&&(k.setUniform("uProjection","Matrix4fv",!1,u),k.setUniform("uView","Matrix4fv",!1,d),k.setUniform("uModel","Matrix4fv",!1,y),k.setUniform("uRotation","Matrix4fv",!1,o.rotation),k.setUniform("uDepth","1f",s),k.setUniform("uBottomLeft","2fv",[l.left,l.bottom]),k.setUniform("uTopRight","2fv",[l.right,l.top]),k.setUniform("uRes","1f",n),k.setUniform("uBondShade","1f",e.bondShade),k.setUniform("uAtomScale","1f",2.5*e.atomScale),k.setUniform("uRelativeAtomScale","1f",e.relativeAtomScale),k.setUniform("uMode","1i",0),J.render()),m.viewport(0,0,t,t);var S=ee(e),x=ee(o),M=we(c(),r);T.bind(),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT),j.setUniform("uSceneDepth","1i",h.index),j.setUniform("uSceneNormal","1i",f.index),j.setUniform("uRandRotDepth","1i",_.index),j.setUniform("uAccumulator","1i",w.index),j.setUniform("uSceneBottomLeft","2fv",[S.left,S.bottom]),j.setUniform("uSceneTopRight","2fv",[S.right,S.top]),j.setUniform("uRotBottomLeft","2fv",[x.left,x.bottom]),j.setUniform("uRotTopRight","2fv",[x.right,x.top]),j.setUniform("uRes","1f",t),j.setUniform("uDepth","1f",s),j.setUniform("uRot","Matrix4fv",!1,r),j.setUniform("uInvRot","Matrix4fv",!1,M),j.setUniform("uSampleCount","1i",ae),Q.render(),w.activate(),w.bind(),m.copyTexImage2D(m.TEXTURE_2D,0,m.RGBA,0,0,t,t,0)}function i(e){if(m.viewport(0,0,t,t),e.fxaa>0||e.dofStrength>0?L.bind():m.bindFramebuffer(m.FRAMEBUFFER,null),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT),q.setUniform("uSceneColor","1i",d.index),q.setUniform("uSceneDepth","1i",h.index),q.setUniform("uAccumulatorOut","1i",S.index),q.setUniform("uRes","1f",t),q.setUniform("uAO","1f",2*e.ao),q.setUniform("uBrightness","1f",2*e.brightness),q.setUniform("uOutlineStrength","1f",e.outline),ne.render(),e.fxaa>0){e.dofStrength>0?C.bind():m.bindFramebuffer(m.FRAMEBUFFER,null);for(var n=0;n<e.fxaa;n++)m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT),0==n?X.setUniform("uTexture","1i",E.index):X.setUniform("uTexture","1i",x.index),X.setUniform("uRes","1f",t),re.render(),x.activate(),x.bind(),m.copyTexImage2D(m.TEXTURE_2D,0,m.RGBA,0,0,t,t,0)}e.dofStrength>0&&(m.bindFramebuffer(m.FRAMEBUFFER,null),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT),e.fxaa>0?W.setUniform("uColor","1i",x.index):W.setUniform("uColor","1i",E.index),W.setUniform("uDepth","1i",h.index),W.setUniform("uDOFPosition","1f",e.dofPosition),W.setUniform("uDOFStrength","1f",e.dofStrength),W.setUniform("uRes","1f",t),oe.render())}var s,l,u,m,e,d,f,h,_,y,w,S,x,M,I,E,F,R,A,T,C,P,L,N,k,j,q,X,W,V,G,K=this,Z=null,J=null,$=null,Q=null,ne=null,oe=null,re=null,ae=0,ie=!1,se=!1;K.getAOProgress=function(){return ae/1024},K.initialize=function(){e.width=e.height=t,m=e.getContext("webgl"),m.enable(m.DEPTH_TEST),m.enable(m.CULL_FACE),m.clearColor(0,0,0,0),m.clearDepth(1),m.viewport(0,0,t,t),window.gl=m,G=O(m,["EXT_frag_depth","WEBGL_depth_texture"]),K.createTextures(),N=ce(m,Ne.atoms),k=ce(m,Ne.bonds),V=ce(m,Ne.texturedquad),j=ce(m,Ne.accumulator),q=ce(m,Ne.ao),X=ce(m,Ne.fxaa),W=ce(m,Ne.dof);var n=[-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0],o=U(m,{aPosition:3});o.aPosition.buffer.set(new Float32Array(n));var r=n.length/9;$=new H(m,V,o,r),Q=new H(m,j,o,r),ne=new H(m,q,o,r),re=new H(m,X,o,r),oe=new H(m,W,o,r),l=0},K.createTextures=function(){y=new B(m,0,null,n,n),_=new B(m,1,null,n,n,{internalFormat:m.DEPTH_COMPONENT,format:m.DEPTH_COMPONENT,type:m.UNSIGNED_SHORT}),A=new z(m,[y],_),d=new B(m,2,null,t,t),f=new B(m,3,null,t,t),h=new B(m,4,null,t,t,{internalFormat:m.DEPTH_COMPONENT,format:m.DEPTH_COMPONENT,type:m.UNSIGNED_SHORT}),F=new z(m,[d],h),R=new z(m,[f],h),w=new B(m,5,null,t,t),S=new B(m,6,null,t,t),T=new z(m,[S]),E=new B(m,7,null,t,t),L=new z(m,[E]),x=new B(m,8,null,t,t),M=new B(m,9,null,t,t),C=new z(m,[M]),I=new B(m,10,null,t,t),P=new z(m,[I])},K.setResolution=function(o,r){n=r,t=o,e.width=e.height=t,m.viewport(0,0,t,t),K.createTextures()},K.setSystem=function(e,t){function n(e){for(var t=[],n=0;n<36;n++)t.push.apply(t,e);return t}u=e;for(var o=U(m,{aImposter:3,aPosition:3,aRadius:1,aColor:3}),r=[],a=[],i=[],s=[],l=0;l<u.atoms.length;l++){r.push.apply(r,ze);var c=u.atoms[l];a.push.apply(a,n([c.x,c.y,c.z])),i.push.apply(i,n([Be[c.symbol].radius]));var d=Be[c.symbol].color;s.push.apply(s,n([d[0],d[1],d[2]]))}if(t.lattice&&u.lattice.points)for(var l=0;l<u.lattice.points.length;l++){r.push.apply(r,ze);var c=u.lattice.points[l];a.push.apply(a,n(c.position)),i.push.apply(i,n([-4*te(t)])),s.push.apply(s,n(c.color))}if(r.length>0){o.aImposter.buffer.set(new Float32Array(r)),o.aPosition.buffer.set(new Float32Array(a)),o.aRadius.buffer.set(new Float32Array(i)),o.aColor.buffer.set(new Float32Array(s));var f=r.length/9;Z=new H(m,N,o,f)}if(t.bonds||t.lattice){J=null;var o=U(m,{aImposter:3,aPosA:3,aPosB:3,aRadius:1,aRadA:1,aRadB:1,aColA:3,aColB:3}),r=[],h=[],p=[],i=[],v=[],b=[],g=[],_=[];if(t.bonds&&u.bonds.length>0)for(var l=0;l<u.bonds.length;l++){var y=u.bonds[l];if(y.cutoff>t.bondThreshold)break;r.push.apply(r,ze),h.push.apply(h,n([y.posA.x,y.posA.y,y.posA.z])),p.push.apply(p,n([y.posB.x,y.posB.y,y.posB.z])),i.push.apply(i,n([2.5*te(t)])),v.push.apply(v,n([y.radA])),b.push.apply(b,n([y.radB])),g.push.apply(g,n([y.colA.r,y.colA.g,y.colA.b])),_.push.apply(_,n([y.colB.r,y.colB.g,y.colB.b]))}if(t.lattice&&u.lattice.edges)for(var l=0;l<u.lattice.edges.length;l++){var y=u.lattice.edges[l];r.push.apply(r,ze),h.push.apply(h,n([y.posA.x,y.posA.y,y.posA.z])),p.push.apply(p,n([y.posB.x,y.posB.y,y.posB.z])),i.push.apply(i,n([.5*te(t)])),v.push.apply(v,n([y.radA])),b.push.apply(b,n([y.radB])),g.push.apply(g,n([y.colA.r,y.colA.g,y.colA.b])),_.push.apply(_,n([y.colB.r,y.colB.g,y.colB.b]))}if(r.length>0){o.aImposter.buffer.set(new Float32Array(r)),o.aPosA.buffer.set(new Float32Array(h)),o.aPosB.buffer.set(new Float32Array(p)),o.aRadius.buffer.set(new Float32Array(i)),o.aRadA.buffer.set(new Float32Array(v)),o.aRadB.buffer.set(new Float32Array(b)),o.aColA.buffer.set(new Float32Array(g)),o.aColB.buffer.set(new Float32Array(_));var f=r.length/9;J=new H(m,k,o,f)}}},K.reset=function(){ae=0,ie=!1,se=!1,w.reset(),S.reset()},K.render=function(e){if(void 0!==u&&null!=Z){if(s=2*ue(u),ie)if(se)for(var t=0;t<e.spf&&!(ae>1024);t++)a(e),ae++;else r(e);else o(e);i(e)}},K.initialize()}function ce(e,t){return t=t.split("// __split__"),new j(e,t[0],t[1])}function de(e){e._state.needReset&&(e._renderer.reset(),e._state.needReset=!1),e._renderer.render(e._view),requestAnimationFrame(function(){de(e)})}function fe(e){e.addEventListener("mousedown",function(t){document.body.style.cursor="none",0==t.button&&(e._state.buttonDown=!0),e._state.lastX=t.clientX,e._state.lastY=t.clientY}),window.addEventListener("mouseup",function(t){document.body.style.cursor="",0==t.button&&(e._state.buttonDown=!1)}),setInterval(function(){e._state.buttonDown||(document.body.style.cursor="")},10),window.addEventListener("mousemove",function(t){if(e.clientWidth==e._state.width&&e.clientHeight==e._state.height||e.dispatchEvent(new CustomEvent("resize-canvas",{detail:"resize canvas"})),e._state.width=e.clientWidth,e._state.height=e.clientHeight,e._state.buttonDown){var n=t.clientX-e._state.lastX,o=t.clientY-e._state.lastY;0==n&&0==o||(e._state.lastX=t.clientX,
e._state.lastY=t.clientY,t.shiftKey?$(e._view,n,o):Q(e._view,n,o),e._state.needReset=!0)}}),e.addEventListener("wheel",function(t){var n=0;n=t.deltaY<0?1:-1,e._view.zoom=e._view.zoom*(1===n?1/.9:.9),J(e._view),e._state.needReset=!0,t.preventDefault()}),e.addEventListener("resize-canvas",function(t){var n=Math.min(e.clientWidth,e.clientHeight);n<100&&(n=100),console.log("resolution changed"),e._view.resolution=n,J(e._view),e._renderer.setResolution(e._view.resolution,e._view.aoRes),e._state.needReset=!0})}var he;!function(){window.WebComponents=window.WebComponents||{flags:{}};var e="webcomponents-lite.js",t=document.querySelector('script[src*="'+e+'"]'),n={};if(!n.noOpts){if(location.search.slice(1).split("&").forEach(function(e){var t,o=e.split("=");o[0]&&(t=o[0].match(/wc-(.+)/))&&(n[t[1]]=o[1]||!0)}),t)for(var o,r=0;o=t.attributes[r];r++)"src"!==o.name&&(n[o.name]=o.value||!0);if(n.log&&n.log.split){var a=n.log.split(",");n.log={},a.forEach(function(e){n.log[e]=!0})}else n.log={}}n.register&&(window.CustomElements=window.CustomElements||{flags:{}},window.CustomElements.flags.register=n.register),WebComponents.flags=n}(),function(e){function t(e){return void 0!==c[e]}function n(){s.call(this),this._isInvalid=!0}function o(e){return""==e&&n.call(this),e.toLowerCase()}function r(e){var t=e.charCodeAt(0);return t>32&&t<127&&[34,35,60,62,63,96].indexOf(t)==-1?e:encodeURIComponent(e)}function a(e){var t=e.charCodeAt(0);return t>32&&t<127&&[34,35,60,62,96].indexOf(t)==-1?e:encodeURIComponent(e)}function i(e,i,s){function l(e){_.push(e)}var u=i||"scheme start",m=0,v="",b=!1,g=!1,_=[];e:for(;(e[m-1]!=f||0==m)&&!this._isInvalid;){var y=e[m];switch(u){case"scheme start":if(!y||!h.test(y)){if(i){l("Invalid scheme.");break e}v="",u="no scheme";continue}v+=y.toLowerCase(),u="scheme";break;case"scheme":if(y&&p.test(y))v+=y.toLowerCase();else{if(":"!=y){if(i){if(f==y)break e;l("Code point not allowed in scheme: "+y);break e}v="",m=0,u="no scheme";continue}if(this._scheme=v,v="",i)break e;t(this._scheme)&&(this._isRelative=!0),u="file"==this._scheme?"relative":this._isRelative&&s&&s._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"==y?(this._query="?",u="query"):"#"==y?(this._fragment="#",u="fragment"):f!=y&&"\t"!=y&&"\n"!=y&&"\r"!=y&&(this._schemeData+=r(y));break;case"no scheme":if(s&&t(s._scheme)){u="relative";continue}l("Missing scheme."),n.call(this);break;case"relative or authority":if("/"!=y||"/"!=e[m+1]){l("Expected /, got: "+y),u="relative";continue}u="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!=this._scheme&&(this._scheme=s._scheme),f==y){this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._username=s._username,this._password=s._password;break e}if("/"==y||"\\"==y)"\\"==y&&l("\\ is an invalid code point."),u="relative slash";else if("?"==y)this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query="?",this._username=s._username,this._password=s._password,u="query";else{if("#"!=y){var w=e[m+1],S=e[m+2];("file"!=this._scheme||!h.test(y)||":"!=w&&"|"!=w||f!=S&&"/"!=S&&"\\"!=S&&"?"!=S&&"#"!=S)&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password,this._path=s._path.slice(),this._path.pop()),u="relative path";continue}this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._fragment="#",this._username=s._username,this._password=s._password,u="fragment"}break;case"relative slash":if("/"!=y&&"\\"!=y){"file"!=this._scheme&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password),u="relative path";continue}"\\"==y&&l("\\ is an invalid code point."),u="file"==this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=y){l("Expected '/', got: "+y),u="authority ignore slashes";continue}u="authority second slash";break;case"authority second slash":if(u="authority ignore slashes","/"!=y){l("Expected '/', got: "+y);continue}break;case"authority ignore slashes":if("/"!=y&&"\\"!=y){u="authority";continue}l("Expected authority, got: "+y);break;case"authority":if("@"==y){b&&(l("@ already seen."),v+="%40"),b=!0;for(var x=0;x<v.length;x++){var M=v[x];if("\t"!=M&&"\n"!=M&&"\r"!=M)if(":"!=M||null!==this._password){var D=r(M);null!==this._password?this._password+=D:this._username+=D}else this._password="";else l("Invalid whitespace in authority.")}v=""}else{if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y){m-=v.length,v="",u="host";continue}v+=y}break;case"file host":if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y){2!=v.length||!h.test(v[0])||":"!=v[1]&&"|"!=v[1]?0==v.length?u="relative path start":(this._host=o.call(this,v),v="",u="relative path start"):u="relative path";continue}"\t"==y||"\n"==y||"\r"==y?l("Invalid whitespace in file host."):v+=y;break;case"host":case"hostname":if(":"!=y||g){if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y){if(this._host=o.call(this,v),v="",u="relative path start",i)break e;continue}"\t"!=y&&"\n"!=y&&"\r"!=y?("["==y?g=!0:"]"==y&&(g=!1),v+=y):l("Invalid code point in host/hostname: "+y)}else if(this._host=o.call(this,v),v="",u="port","hostname"==i)break e;break;case"port":if(/[0-9]/.test(y))v+=y;else{if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y||i){if(""!=v){var I=parseInt(v,10);I!=c[this._scheme]&&(this._port=I+""),v=""}if(i)break e;u="relative path start";continue}"\t"==y||"\n"==y||"\r"==y?l("Invalid code point in port: "+y):n.call(this)}break;case"relative path start":if("\\"==y&&l("'\\' not allowed in path."),u="relative path","/"!=y&&"\\"!=y)continue;break;case"relative path":if(f!=y&&"/"!=y&&"\\"!=y&&(i||"?"!=y&&"#"!=y))"\t"!=y&&"\n"!=y&&"\r"!=y&&(v+=r(y));else{"\\"==y&&l("\\ not allowed in relative path.");var E;(E=d[v.toLowerCase()])&&(v=E),".."==v?(this._path.pop(),"/"!=y&&"\\"!=y&&this._path.push("")):"."==v&&"/"!=y&&"\\"!=y?this._path.push(""):"."!=v&&("file"==this._scheme&&0==this._path.length&&2==v.length&&h.test(v[0])&&"|"==v[1]&&(v=v[0]+":"),this._path.push(v)),v="","?"==y?(this._query="?",u="query"):"#"==y&&(this._fragment="#",u="fragment")}break;case"query":i||"#"!=y?f!=y&&"\t"!=y&&"\n"!=y&&"\r"!=y&&(this._query+=a(y)):(this._fragment="#",u="fragment");break;case"fragment":f!=y&&"\t"!=y&&"\n"!=y&&"\r"!=y&&(this._fragment+=y)}m++}}function s(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function l(e,t){void 0===t||t instanceof l||(t=new l(String(t))),this._url=e,s.call(this);var n=e.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");i.call(this,n,null,t)}var u=!1;if(!e.forceJURL)try{var m=new URL("b","http://a");m.pathname="c%20d",u="http://a/c%20d"===m.href}catch(e){}if(!u){var c=Object.create(null);c.ftp=21,c.file=0,c.gopher=70,c.http=80,c.https=443,c.ws=80,c.wss=443;var d=Object.create(null);d["%2e"]=".",d[".%2e"]="..",d["%2e."]="..",d["%2e%2e"]="..";var f=void 0,h=/[a-zA-Z]/,p=/[a-zA-Z0-9\+\-\.]/;l.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var e="";return""==this._username&&null==this._password||(e=this._username+(null!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+e+this.host:"")+this.pathname+this._query+this._fragment},set href(e){s.call(this),i.call(this,e)},get protocol(){return this._scheme+":"},set protocol(e){this._isInvalid||i.call(this,e+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(e){!this._isInvalid&&this._isRelative&&i.call(this,e,"host")},get hostname(){return this._host},set hostname(e){!this._isInvalid&&this._isRelative&&i.call(this,e,"hostname")},get port(){return this._port},set port(e){!this._isInvalid&&this._isRelative&&i.call(this,e,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(e){!this._isInvalid&&this._isRelative&&(this._path=[],i.call(this,e,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(e){!this._isInvalid&&this._isRelative&&(this._query="?","?"==e[0]&&(e=e.slice(1)),i.call(this,e,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(e){this._isInvalid||(this._fragment="#","#"==e[0]&&(e=e.slice(1)),i.call(this,e,"fragment"))},get origin(){var e;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return e=this.host,e?this._scheme+"://"+e:""}};var v=e.URL;v&&(l.createObjectURL=function(e){return v.createObjectURL.apply(v,arguments)},l.revokeObjectURL=function(e){v.revokeObjectURL(e)}),e.URL=l}}(self),"undefined"==typeof WeakMap&&!function(){var e=Object.defineProperty,t=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+(t++ +"__")};n.prototype={set:function(t,n){var o=t[this.name];return o&&o[0]===t?o[1]=n:e(t,this.name,{value:[t,n],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];return!(!t||t[0]!==e)&&(t[0]=t[1]=void 0,!0)},has:function(e){var t=e[this.name];return!!t&&t[0]===e}},window.WeakMap=n}(),function(e){function t(e){y.push(e),_||(_=!0,p(o))}function n(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}function o(){_=!1;var e=y;y=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var n=e.takeRecords();r(e),n.length&&(e.callback_(n,e),t=!0)}),t&&o()}function r(e){e.nodes_.forEach(function(t){var n=v.get(t);n&&n.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}function a(e,t){for(var n=e;n;n=n.parentNode){var o=v.get(n);if(o)for(var r=0;r<o.length;r++){var a=o[r],i=a.options;if(n===e||i.subtree){var s=t(i);s&&a.enqueue(s)}}}}function i(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++w}function s(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function l(e){var t=new s(e.type,e.target);return t.addedNodes=e.addedNodes.slice(),t.removedNodes=e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t}function u(e,t){return S=new s(e,t)}function m(e){return x?x:(x=l(S),x.oldValue=e,x)}function c(){S=x=void 0}function d(e){return e===x||e===S}function f(e,t){return e===t?e:x&&d(e)?x:null}function h(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[]}if(!e.JsMutationObserver){var p,v=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))p=setTimeout;else if(window.setImmediate)p=window.setImmediate;else{var b=[],g=String(Math.random());window.addEventListener("message",function(e){if(e.data===g){var t=b;b=[],t.forEach(function(e){e()})}}),p=function(e){b.push(e),window.postMessage(g,"*")}}var _=!1,y=[],w=0;i.prototype={observe:function(e,t){if(e=n(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var o=v.get(e);o||v.set(e,o=[]);for(var r,a=0;a<o.length;a++)if(o[a].observer===this){r=o[a],r.removeListeners(),r.options=t;break}r||(r=new h(this,e,t),o.push(r),this.nodes_.push(e)),r.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=v.get(e),n=0;n<t.length;n++){var o=t[n];if(o.observer===this){o.removeListeners(),t.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var S,x;h.prototype={enqueue:function(e){var n=this.observer.records_,o=n.length;if(n.length>0){var r=n[o-1],a=f(r,e);if(a)return void(n[o-1]=a)}else t(this.observer);n[o]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=v.get(e);t||v.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=v.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,n=e.relatedNode.namespaceURI,o=e.target,r=new u("attributes",o);r.attributeName=t,r.attributeNamespace=n;var i=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;a(o,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||e.attributeFilter.indexOf(t)!==-1||e.attributeFilter.indexOf(n)!==-1))return e.attributeOldValue?m(i):r});break;case"DOMCharacterDataModified":var o=e.target,r=u("characterData",o),i=e.prevValue;a(o,function(e){if(e.characterData)return e.characterDataOldValue?m(i):r});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var s,l,d=e.target;"DOMNodeInserted"===e.type?(s=[d],l=[]):(s=[],l=[d]);var f=d.previousSibling,h=d.nextSibling,r=u("childList",e.target.parentNode);r.addedNodes=s,r.removedNodes=l,r.previousSibling=f,r.nextSibling=h,a(e.relatedNode,function(e){if(e.childList)return r})}c()}},e.JsMutationObserver=i,e.MutationObserver||(e.MutationObserver=i,i._isPolyfilled=!0)}}(self),function(){var e="undefined"==typeof HTMLTemplateElement;/Trident/.test(navigator.userAgent)&&!function(){var e=document.importNode;document.importNode=function(){var t=e.apply(document,arguments);if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var n=document.createDocumentFragment();return n.appendChild(t),n}return t}}();var t=function(){if(!e){var t=document.createElement("template"),n=document.createElement("template");n.content.appendChild(document.createElement("div")),t.content.appendChild(n);var o=t.cloneNode(!0);return 0===o.content.childNodes.length||0===o.content.firstChild.content.childNodes.length}}(),n="template",o=function(){};if(e){var r,a,i,s,l,u;!function(){var e=function(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case" ":return"&nbsp;"}},t=function(t){return t.replace(u,e)};r=document.implementation.createHTMLDocument("template"),a=!0,i=document.createElement("style"),i.textContent=n+"{display:none;}",s=document.head,s.insertBefore(i,s.firstElementChild),o.prototype=Object.create(HTMLElement.prototype),o.decorate=function(e){if(!e.content){e.content=r.createDocumentFragment();for(var n;n=e.firstChild;)e.content.appendChild(n);if(e.cloneNode=function(e){return o.cloneNode(this,e)},a)try{Object.defineProperty(e,"innerHTML",{get:function(){for(var e="",n=this.content.firstChild;n;n=n.nextSibling)e+=n.outerHTML||t(n.data);return e},set:function(e){for(r.body.innerHTML=e,o.bootstrap(r);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;r.body.firstChild;)this.content.appendChild(r.body.firstChild)},configurable:!0})}catch(e){a=!1}o.bootstrap(e.content)}},o.bootstrap=function(e){for(var t,r=e.querySelectorAll(n),a=0,i=r.length;a<i&&(t=r[a]);a++)o.decorate(t)},document.addEventListener("DOMContentLoaded",function(){o.bootstrap(document)}),l=document.createElement,document.createElement=function(){var e=l.apply(document,arguments);return"template"===e.localName&&o.decorate(e),e},u=/[&\u00A0<>]/g}()}if(e||t){var m=Node.prototype.cloneNode;o.cloneNode=function(e,t){var n=m.call(e,!1);return this.decorate&&this.decorate(n),t&&(n.content.appendChild(m.call(e.content,!0)),this.fixClonedDom(n.content,e.content)),n},o.fixClonedDom=function(e,t){if(t.querySelectorAll)for(var o,r,a=t.querySelectorAll(n),i=e.querySelectorAll(n),s=0,l=i.length;s<l;s++)r=a[s],o=i[s],this.decorate&&this.decorate(r),o.parentNode.replaceChild(r.cloneNode(!0),o)};var c=document.importNode;Node.prototype.cloneNode=function(e){var t=m.call(this,e);return e&&o.fixClonedDom(t,this),t},document.importNode=function(e,t){if(e.localName===n)return o.cloneNode(e,t);var r=c.call(document,e,t);return t&&o.fixClonedDom(r,e),r},t&&(HTMLTemplateElement.prototype.cloneNode=function(e){return o.cloneNode(this,e)})}e&&(window.HTMLTemplateElement=o)}(),function(e){if(!window.performance){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}window.requestAnimationFrame||(window.requestAnimationFrame=function(){var e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return e?function(t){return e(function(){t(performance.now())})}:function(e){return window.setTimeout(e,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}}());var n=function(){var e=document.createEvent("Event");return e.initEvent("foo",!0,!0),e.preventDefault(),e.defaultPrevented}();if(!n){var o=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(o.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var r=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||r&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.Event||r&&"function"!=typeof window.Event){var a=window.Event;window.Event=function(e,t){t=t||{};var n=document.createEvent("Event");return n.initEvent(e,Boolean(t.bubbles),Boolean(t.cancelable)),n},window.Event.prototype=a.prototype}}(window.WebComponents),window.HTMLImports=window.HTMLImports||{flags:{}},function(e){function t(e,t){t=t||c,o(function(){a(e,t)},t)}function n(e){return"complete"===e.readyState||e.readyState===h}function o(e,t){if(n(t))e&&e();else{var r=function n(){"complete"!==t.readyState&&t.readyState!==h||(t.removeEventListener(p,n),o(e,t))};t.addEventListener(p,r)}}function r(e){e.target.__loaded=!0}function a(e,t){function n(){l==u&&e&&e({allImports:s,loadedImports:m,errorImports:c})}function o(e){r(e),m.push(this),l++,n()}function a(e){c.push(this),l++,n()}var s=t.querySelectorAll("link[rel=import]"),l=0,u=s.length,m=[],c=[];if(u)for(var d,f=0;f<u&&(d=s[f]);f++)i(d)?(m.push(this),l++,n()):(d.addEventListener("load",o),d.addEventListener("error",a));else n()}function i(e){return l?e.__loaded||e.import&&"loading"!==e.import.readyState:e.__importParsed}var s="import",l=Boolean(s in document.createElement("link")),u=Boolean(window.ShadowDOMPolyfill),m=function(e){return u?window.ShadowDOMPolyfill.wrapIfNeeded(e):e},c=m(document),d={get:function(){var e=window.HTMLImports.currentScript||document.currentScript||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null);return m(e)},configurable:!0};Object.defineProperty(document,"_currentScript",d),Object.defineProperty(c,"_currentScript",d);var f=/Trident/.test(navigator.userAgent),h=f?"complete":"interactive",p="readystatechange";l&&!function(){var e=function(e){for(var o,r=0,a=e.length;r<a&&(o=e[r]);r++)t(o)&&n(o)},t=function(e){return"link"===e.localName&&"import"===e.rel},n=function(e){var t=e.import;t?r({target:e}):(e.addEventListener("load",r),e.addEventListener("error",r))};new MutationObserver(function(t){for(var n,o=0,r=t.length;o<r&&(n=t[o]);o++)n.addedNodes&&e(n.addedNodes)}).observe(document.head,{childList:!0}),function(){if("loading"===document.readyState)for(var e,t=document.querySelectorAll("link[rel=import]"),o=0,r=t.length;o<r&&(e=t[o]);o++)n(e)}()}(),t(function(e){window.HTMLImports.ready=!0,window.HTMLImports.readyTime=(new Date).getTime();var t=c.createEvent("CustomEvent");t.initCustomEvent("HTMLImportsLoaded",!0,!0,e),c.dispatchEvent(t)}),e.IMPORT_LINK_TYPE=s,e.useNative=l,e.rootDocument=c,e.whenReady=t,e.isIE=f}(window.HTMLImports),function(e){var t=[],n=function(e){t.push(e)},o=function(){t.forEach(function(t){t(e)})};e.addModule=n,e.initializeModules=o}(window.HTMLImports),window.HTMLImports.addModule(function(e){var t=/(url\()([^)]*)(\))/g,n=/(@import[\s]+(?!url\())([^;]*)(;)/g,o={resolveUrlsInStyle:function(e,t){var n=e.ownerDocument,o=n.createElement("a");return e.textContent=this.resolveUrlsInCssText(e.textContent,t,o),e},resolveUrlsInCssText:function(e,o,r){var a=this.replaceUrls(e,r,o,t);return a=this.replaceUrls(a,r,o,n)},replaceUrls:function(e,t,n,o){return e.replace(o,function(e,o,r,a){var i=r.replace(/["']/g,"");return n&&(i=new URL(i,n).href),t.href=i,i=t.href,o+"'"+i+"'"+a})}};e.path=o}),window.HTMLImports.addModule(function(e){var t={async:!0,ok:function(e){return e.status>=200&&e.status<300||304===e.status||0===e.status},load:function(n,o,r){var a=new XMLHttpRequest;return(e.flags.debug||e.flags.bust)&&(n+="?"+Math.random()),a.open("GET",n,t.async),a.addEventListener("readystatechange",function(e){if(4===a.readyState){var n=null;try{var i=a.getResponseHeader("Location");i&&(n="/"===i.substr(0,1)?location.origin+i:i)}catch(e){console.error(e.message)}o.call(r,!t.ok(a)&&a,a.response||a.responseText,n)}}),a.send(),a},loadDocument:function(e,t,n){this.load(e,t,n).responseType="document"}};e.xhr=t}),window.HTMLImports.addModule(function(e){var t=e.xhr,n=e.flags,o=function(e,t){this.cache={},this.onload=e,this.oncomplete=t,this.inflight=0,this.pending={}};o.prototype={addNodes:function(e){this.inflight+=e.length;for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)this.require(t);this.checkDone()},addNode:function(e){this.inflight++,this.require(e),this.checkDone()},require:function(e){var t=e.src||e.href;e.__nodeUrl=t,this.dedupe(t,e)||this.fetch(t,e)},dedupe:function(e,t){if(this.pending[e])return this.pending[e].push(t),!0;return this.cache[e]?(this.onload(e,t,this.cache[e]),this.tail(),!0):(this.pending[e]=[t],!1)},fetch:function(e,o){if(n.load&&console.log("fetch",e,o),e)if(e.match(/^data:/)){var r=e.split(","),a=r[0],i=r[1];i=a.indexOf(";base64")>-1?atob(i):decodeURIComponent(i),setTimeout(function(){this.receive(e,o,null,i)}.bind(this),0)}else{var s=function(t,n,r){this.receive(e,o,t,n,r)}.bind(this);t.load(e,s)}else setTimeout(function(){this.receive(e,o,{error:"href must be specified"},null)}.bind(this),0)},receive:function(e,t,n,o,r){this.cache[e]=o;for(var a,i=this.pending[e],s=0,l=i.length;s<l&&(a=i[s]);s++)this.onload(e,a,o,n,r),this.tail();this.pending[e]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}},e.Loader=o}),window.HTMLImports.addModule(function(e){var t=function(e){this.addCallback=e,this.mo=new MutationObserver(this.handler.bind(this))};t.prototype={handler:function(e){for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)"childList"===t.type&&t.addedNodes.length&&this.addedNodes(t.addedNodes)},addedNodes:function(e){this.addCallback&&this.addCallback(e);for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)t.children&&t.children.length&&this.addedNodes(t.children)},observe:function(e){this.mo.observe(e,{childList:!0,subtree:!0})}},e.Observer=t}),window.HTMLImports.addModule(function(e){function t(e){return"link"===e.localName&&e.rel===m}function n(e){var t=o(e);return"data:text/javascript;charset=utf-8,"+encodeURIComponent(t)}function o(e){return e.textContent+r(e)}function r(e){var t=e.ownerDocument;t.__importedScripts=t.__importedScripts||0;var n=e.ownerDocument.baseURI,o=t.__importedScripts?"-"+t.__importedScripts:"";return t.__importedScripts++,"\n//# sourceURL="+n+o+".js\n"}function a(e){var t=e.ownerDocument.createElement("style");return t.textContent=e.textContent,i.resolveUrlsInStyle(t),t}var i=e.path,s=e.rootDocument,l=e.flags,u=e.isIE,m=e.IMPORT_LINK_TYPE,c="link[rel="+m+"]",d={documentSelectors:c,importsSelectors:[c,"link[rel=stylesheet]:not([type])","style:not([type])","script:not([type])",'script[type="application/javascript"]','script[type="text/javascript"]'].join(","),map:{link:"parseLink",script:"parseScript",style:"parseStyle"},dynamicElements:[],parseNext:function(){var e=this.nextToParse();e&&this.parse(e)},parse:function(e){if(this.isParsed(e))return void(l.parse&&console.log("[%s] is already parsed",e.localName));var t=this[this.map[e.localName]];t&&(this.markParsing(e),t.call(this,e))},parseDynamic:function(e,t){this.dynamicElements.push(e),t||this.parseNext()},markParsing:function(e){l.parse&&console.log("parsing",e),this.parsingElement=e},markParsingComplete:function(e){e.__importParsed=!0,this.markDynamicParsingComplete(e),e.__importElement&&(e.__importElement.__importParsed=!0,this.markDynamicParsingComplete(e.__importElement)),this.parsingElement=null,l.parse&&console.log("completed",e)},markDynamicParsingComplete:function(e){var t=this.dynamicElements.indexOf(e);t>=0&&this.dynamicElements.splice(t,1)},parseImport:function(e){if(e.import=e.__doc,window.HTMLImports.__importsParsingHook&&window.HTMLImports.__importsParsingHook(e),e.import&&(e.import.__importParsed=!0),this.markParsingComplete(e),e.__resource&&!e.__error?e.dispatchEvent(new CustomEvent("load",{bubbles:!1})):e.dispatchEvent(new CustomEvent("error",{bubbles:!1})),e.__pending)for(var t;e.__pending.length;)t=e.__pending.shift(),t&&t({target:e});this.parseNext()},parseLink:function(e){t(e)?this.parseImport(e):(e.href=e.href,this.parseGeneric(e))},parseStyle:function(e){var t=e;e=a(e),t.__appliedElement=e,e.__importElement=t,this.parseGeneric(e)},parseGeneric:function(e){this.trackElement(e),this.addElementToDocument(e)},rootImportForElement:function(e){for(var t=e;t.ownerDocument.__importLink;)t=t.ownerDocument.__importLink;return t},addElementToDocument:function(e){var t=this.rootImportForElement(e.__importElement||e);t.parentNode.insertBefore(e,t)},trackElement:function(e,t){var n=this,o=function o(r){e.removeEventListener("load",o),e.removeEventListener("error",o),t&&t(r),n.markParsingComplete(e),n.parseNext()};if(e.addEventListener("load",o),e.addEventListener("error",o),u&&"style"===e.localName){var r=!1;if(e.textContent.indexOf("@import")==-1)r=!0;else if(e.sheet){r=!0;for(var a,i=e.sheet.cssRules,s=i?i.length:0,l=0;l<s&&(a=i[l]);l++)a.type===CSSRule.IMPORT_RULE&&(r=r&&Boolean(a.styleSheet))}r&&setTimeout(function(){e.dispatchEvent(new CustomEvent("load",{bubbles:!1}))})}},parseScript:function(t){var o=document.createElement("script");o.__importElement=t,o.src=t.src?t.src:n(t),e.currentScript=t,this.trackElement(o,function(t){o.parentNode&&o.parentNode.removeChild(o),e.currentScript=null}),this.addElementToDocument(o)},nextToParse:function(){return this._mayParse=[],!this.parsingElement&&(this.nextToParseInDoc(s)||this.nextToParseDynamic())},nextToParseInDoc:function(e,n){if(e&&this._mayParse.indexOf(e)<0){this._mayParse.push(e);for(var o,r=e.querySelectorAll(this.parseSelectorsForNode(e)),a=0,i=r.length;a<i&&(o=r[a]);a++)if(!this.isParsed(o))return this.hasResource(o)?t(o)?this.nextToParseInDoc(o.__doc,o):o:void 0}return n},nextToParseDynamic:function(){return this.dynamicElements[0]},parseSelectorsForNode:function(e){var t=e.ownerDocument||e;return t===s?this.documentSelectors:this.importsSelectors},isParsed:function(e){return e.__importParsed},needsDynamicParsing:function(e){return this.dynamicElements.indexOf(e)>=0},hasResource:function(e){return!t(e)||void 0!==e.__doc}};e.parser=d,e.IMPORT_SELECTOR=c}),window.HTMLImports.addModule(function(e){function t(e){return n(e,i)}function n(e,t){return"link"===e.localName&&e.getAttribute("rel")===t}function o(e){return!!Object.getOwnPropertyDescriptor(e,"baseURI")}function r(e,t){var n=document.implementation.createHTMLDocument(i);n._URL=t;var r=n.createElement("base");r.setAttribute("href",t),n.baseURI||o(n)||Object.defineProperty(n,"baseURI",{value:t});var a=n.createElement("meta");return a.setAttribute("charset","utf-8"),n.head.appendChild(a),n.head.appendChild(r),n.body.innerHTML=e,window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(n),n}var a=e.flags,i=e.IMPORT_LINK_TYPE,s=e.IMPORT_SELECTOR,l=e.rootDocument,u=e.Loader,m=e.Observer,c=e.parser,d={documents:{},documentPreloadSelectors:s,importsPreloadSelectors:[s].join(","),loadNode:function(e){f.addNode(e)},loadSubtree:function(e){var t=this.marshalNodes(e);f.addNodes(t)},marshalNodes:function(e){return e.querySelectorAll(this.loadSelectorsForNode(e))},loadSelectorsForNode:function(e){var t=e.ownerDocument||e;return t===l?this.documentPreloadSelectors:this.importsPreloadSelectors},loaded:function(e,n,o,i,s){if(a.load&&console.log("loaded",e,n),n.__resource=o,n.__error=i,t(n)){var l=this.documents[e];void 0===l&&(l=i?null:r(o,s||e),l&&(l.__importLink=n,this.bootDocument(l)),this.documents[e]=l),n.__doc=l}c.parseNext()},bootDocument:function(e){this.loadSubtree(e),this.observer.observe(e),c.parseNext()},loadedAll:function(){c.parseNext()}},f=new u(d.loaded.bind(d),d.loadedAll.bind(d));if(d.observer=new m,!document.baseURI){var h={get:function(){var e=document.querySelector("base");return e?e.href:window.location.href},configurable:!0};Object.defineProperty(document,"baseURI",h),Object.defineProperty(l,"baseURI",h)}e.importer=d,e.importLoader=f}),window.HTMLImports.addModule(function(e){var t=e.parser,n=e.importer,o={added:function(e){for(var o,r,a,i,s=0,l=e.length;s<l&&(i=e[s]);s++)o||(o=i.ownerDocument,r=t.isParsed(o)),a=this.shouldLoadNode(i),a&&n.loadNode(i),this.shouldParseNode(i)&&r&&t.parseDynamic(i,a)},shouldLoadNode:function(e){return 1===e.nodeType&&r.call(e,n.loadSelectorsForNode(e))},shouldParseNode:function(e){return 1===e.nodeType&&r.call(e,t.parseSelectorsForNode(e))}};n.observer.addCallback=o.added.bind(o);var r=HTMLElement.prototype.matches||HTMLElement.prototype.matchesSelector||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector}),function(e){function t(){window.HTMLImports.importer.bootDocument(o)}var n=e.initializeModules;e.isIE;if(!e.useNative){n();var o=e.rootDocument;"complete"===document.readyState||"interactive"===document.readyState&&!window.attachEvent?t():document.addEventListener("DOMContentLoaded",t)}}(window.HTMLImports),window.CustomElements=window.CustomElements||{flags:{}},function(e){var t=e.flags,n=[],o=function(e){n.push(e)},r=function(){n.forEach(function(t){t(e)})};e.addModule=o,e.initializeModules=r,e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(e){function t(e,t){n(e,function(e){return!!t(e)||void o(e,t)}),o(e,t)}function n(e,t,o){var r=e.firstElementChild;if(!r)for(r=e.firstChild;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.nextSibling;for(;r;)t(r,o)!==!0&&n(r,t,o),r=r.nextElementSibling;return null}function o(e,n){for(var o=e.shadowRoot;o;)t(o,n),o=o.olderShadowRoot}function r(e,t){a(e,t,[])}function a(e,t,n){if(e=window.wrap(e),!(n.indexOf(e)>=0)){n.push(e);for(var o,r=e.querySelectorAll("link[rel="+i+"]"),s=0,l=r.length;s<l&&(o=r[s]);s++)o.import&&a(o.import,t,n);
t(e)}}var i=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";e.forDocumentTree=r,e.forSubtree=t}),window.CustomElements.addModule(function(e){function t(e,t){return n(e,t)||o(e,t)}function n(t,n){return!!e.upgrade(t,n)||void(n&&i(t))}function o(e,t){_(e,function(e){if(n(e,t))return!0})}function r(e){x.push(e),S||(S=!0,setTimeout(a))}function a(){S=!1;for(var e,t=x,n=0,o=t.length;n<o&&(e=t[n]);n++)e();x=[]}function i(e){w?r(function(){s(e)}):s(e)}function s(e){e.__upgraded__&&!e.__attached&&(e.__attached=!0,e.attachedCallback&&e.attachedCallback())}function l(e){u(e),_(e,function(e){u(e)})}function u(e){w?r(function(){m(e)}):m(e)}function m(e){e.__upgraded__&&e.__attached&&(e.__attached=!1,e.detachedCallback&&e.detachedCallback())}function c(e){for(var t=e,n=window.wrap(document);t;){if(t==n)return!0;t=t.parentNode||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host}}function d(e){if(e.shadowRoot&&!e.shadowRoot.__watched){g.dom&&console.log("watching shadow-root for: ",e.localName);for(var t=e.shadowRoot;t;)p(t),t=t.olderShadowRoot}}function f(e,n){if(g.dom){var o=n[0];if(o&&"childList"===o.type&&o.addedNodes&&o.addedNodes){for(var r=o.addedNodes[0];r&&r!==document&&!r.host;)r=r.parentNode;var a=r&&(r.URL||r._URL||r.host&&r.host.localName)||"";a=a.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",n.length,a||"")}var i=c(e);n.forEach(function(e){"childList"===e.type&&(M(e.addedNodes,function(e){e.localName&&t(e,i)}),M(e.removedNodes,function(e){e.localName&&l(e)}))}),g.dom&&console.groupEnd()}function h(e){for(e=window.wrap(e),e||(e=window.wrap(document));e.parentNode;)e=e.parentNode;var t=e.__observer;t&&(f(e,t.takeRecords()),a())}function p(e){if(!e.__observer){var t=new MutationObserver(f.bind(this,e));t.observe(e,{childList:!0,subtree:!0}),e.__observer=t}}function v(e){e=window.wrap(e),g.dom&&console.group("upgradeDocument: ",e.baseURI.split("/").pop());var n=e===window.wrap(document);t(e,n),p(e),g.dom&&console.groupEnd()}function b(e){y(e,v)}var g=e.flags,_=e.forSubtree,y=e.forDocumentTree,w=window.MutationObserver._isPolyfilled&&g["throttle-attached"];e.hasPolyfillMutations=w,e.hasThrottledAttached=w;var S=!1,x=[],M=Array.prototype.forEach.call.bind(Array.prototype.forEach),D=Element.prototype.createShadowRoot;D&&(Element.prototype.createShadowRoot=function(){var e=D.call(this);return window.CustomElements.watchShadow(this),e}),e.watchShadow=d,e.upgradeDocumentTree=b,e.upgradeDocument=v,e.upgradeSubtree=o,e.upgradeAll=t,e.attached=i,e.takeRecords=h}),window.CustomElements.addModule(function(e){function t(t,o){if("template"===t.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t),!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var r=t.getAttribute("is"),a=e.getRegisteredDefinition(t.localName)||e.getRegisteredDefinition(r);if(a&&(r&&a.tag==t.localName||!r&&!a.extends))return n(t,a,o)}}function n(t,n,r){return i.upgrade&&console.group("upgrade:",t.localName),n.is&&t.setAttribute("is",n.is),o(t,n),t.__upgraded__=!0,a(t),r&&e.attached(t),e.upgradeSubtree(t,r),i.upgrade&&console.groupEnd(),t}function o(e,t){Object.__proto__?e.__proto__=t.prototype:(r(e,t.prototype,t.native),e.__proto__=t.prototype)}function r(e,t,n){for(var o={},r=t;r!==n&&r!==HTMLElement.prototype;){for(var a,i=Object.getOwnPropertyNames(r),s=0;a=i[s];s++)o[a]||(Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a)),o[a]=1);r=Object.getPrototypeOf(r)}}function a(e){e.createdCallback&&e.createdCallback()}var i=e.flags;e.upgrade=t,e.upgradeWithDefinition=n,e.implementPrototype=o}),window.CustomElements.addModule(function(e){function t(t,o){var l=o||{};if(!t)throw new Error("document.registerElement: first argument `name` must not be empty");if(t.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(t)+"'.");if(r(t))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(t)+"'. The type name is invalid.");if(u(t))throw new Error("DuplicateDefinitionError: a type with name '"+String(t)+"' is already registered");return l.prototype||(l.prototype=Object.create(HTMLElement.prototype)),l.__name=t.toLowerCase(),l.extends&&(l.extends=l.extends.toLowerCase()),l.lifecycle=l.lifecycle||{},l.ancestry=a(l.extends),i(l),s(l),n(l.prototype),m(l.__name,l),l.ctor=c(l),l.ctor.prototype=l.prototype,l.prototype.constructor=l.ctor,e.ready&&v(document),l.ctor}function n(e){if(!e.setAttribute._polyfilled){var t=e.setAttribute;e.setAttribute=function(e,n){o.call(this,e,n,t)};var n=e.removeAttribute;e.removeAttribute=function(e){o.call(this,e,null,n)},e.setAttribute._polyfilled=!0}}function o(e,t,n){e=e.toLowerCase();var o=this.getAttribute(e);n.apply(this,arguments);var r=this.getAttribute(e);this.attributeChangedCallback&&r!==o&&this.attributeChangedCallback(e,o,r)}function r(e){for(var t=0;t<w.length;t++)if(e===w[t])return!0}function a(e){var t=u(e);return t?a(t.extends).concat([t]):[]}function i(e){for(var t,n=e.extends,o=0;t=e.ancestry[o];o++)n=t.is&&t.tag;e.tag=n||e.__name,n&&(e.is=e.__name)}function s(e){if(!Object.__proto__){var t=HTMLElement.prototype;if(e.is){var n=document.createElement(e.tag);t=Object.getPrototypeOf(n)}for(var o,r=e.prototype,a=!1;r;)r==t&&(a=!0),o=Object.getPrototypeOf(r),o&&(r.__proto__=o),r=o;a||console.warn(e.tag+" prototype not found in prototype chain for "+e.is),e.native=t}}function l(e){return g(M(e.tag),e)}function u(e){if(e)return S[e.toLowerCase()]}function m(e,t){S[e]=t}function c(e){return function(){return l(e)}}function d(e,t,n){return e===x?f(t,n):D(e,t)}function f(e,t){e&&(e=e.toLowerCase()),t&&(t=t.toLowerCase());var n=u(t||e);if(n){if(e==n.tag&&t==n.is)return new n.ctor;if(!t&&!n.is)return new n.ctor}var o;return t?(o=f(e),o.setAttribute("is",t),o):(o=M(e),e.indexOf("-")>=0&&_(o,HTMLElement),o)}function h(e,t){var n=e[t];e[t]=function(){var e=n.apply(this,arguments);return b(e),e}}var p,v=(e.isIE,e.upgradeDocumentTree),b=e.upgradeAll,g=e.upgradeWithDefinition,_=e.implementPrototype,y=e.useNative,w=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],S={},x="http://www.w3.org/1999/xhtml",M=document.createElement.bind(document),D=document.createElementNS.bind(document);p=Object.__proto__||y?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;for(var n=e;n;){if(n===t.prototype)return!0;n=n.__proto__}return!1},h(Node.prototype,"cloneNode"),h(document,"importNode"),document.registerElement=t,document.createElement=f,document.createElementNS=d,e.registry=S,e.instanceof=p,e.reservedTagList=w,e.getRegisteredDefinition=u,document.register=document.registerElement}),function(e){function t(){a(window.wrap(document)),window.CustomElements.ready=!0;var e=window.requestAnimationFrame||function(e){setTimeout(e,16)};e(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var n=e.useNative,o=e.initializeModules;e.isIE;if(n){var r=function(){};e.watchShadow=r,e.upgrade=r,e.upgradeAll=r,e.upgradeDocumentTree=r,e.upgradeSubtree=r,e.takeRecords=r,e.instanceof=function(e,t){return e instanceof t}}else o();var a=e.upgradeDocumentTree,i=e.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(e){e.import&&i(wrap(e.import))}),"complete"===document.readyState||e.flags.eager)t();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,t)}else t()}(window.CustomElements),function(e){var t=document.createElement("style");t.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var n=document.querySelector("head");n.insertBefore(t,n.firstChild)}(window.WebComponents);var pe=1e-6,ve="undefined"!=typeof Float32Array?Float32Array:Array,be=Math.random,ge=!1,_e=ve===Float32Array&&"undefined"!=typeof SIMD,ye=ge&&_e,we=ye?i:t,Se=ye?s:n,xe=ye?l:o,Me=ye?u:r,De=ye?m:a,Ie=(function(){var e=g();return function(t,n,o,r,a,i){var s,l;for(n||(n=3),o||(o=0),l=r?Math.min(r*n+o,t.length):t.length,s=o;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],a(e,e,i),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),function(){var e=I();return function(t,n,o,r,a,i){var s,l;for(n||(n=4),o||(o=0),l=r?Math.min(r*n+o,t.length):t.length,s=o;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],a(e,e,i),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),function(){var e=g(),t=_(1,0,0),n=_(0,1,0);return function(o,r,a){var i=x(r,a);return i<-.999999?(M(e,t,r),w(e)<1e-6&&M(e,n,r),S(e,e),T(o,e,Math.PI),o):i>.999999?(o[0]=0,o[1]=0,o[2]=0,o[3]=1,o):(M(e,r,a),o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=1+i,Ie(o,o))}}(),function(){var t=e();return function(e,n,o,r){return t[0]=o[0],t[3]=o[1],t[6]=o[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],Ie(e,P(e,t))}}(),function(){var e=A(),t=A();return function(n,o,r,a,i,s){return C(e,o,i,s),C(t,r,a,s),C(n,e,t,2*s*(1-s)),n}}(),F),Ee=(function(){var e=L();return function(t,n,o,r,a,i){var s,l;for(n||(n=2),o||(o=0),l=r?Math.min(r*n+o,t.length):t.length,s=o;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],a(e,e,i),t[s]=e[0],t[s+1]=e[1];return t}}(),{atoms:{atomScale:.6,relativeAtomScale:.64,bondScale:.5,ao:.75,aoRes:256,brightness:.5,outline:0,spf:32,bondThreshold:1.2,bondShade:.5,atomShade:.5,dofStrength:0,dofPosition:.5,fxaa:1},atomsbonds:{atomScale:.24,relativeAtomScale:.64,bondScale:.5,bondThreshold:1.2},toon:{ao:0,spf:0,brightness:.5,outline:1},licorice:{atomScale:.1,relativeAtomScale:0,bondScale:1,bonds:!0,bondThreshold:1.2}}),Fe="#version 100\nprecision highp float;\n\nattribute vec3 aImposter;\nattribute vec3 aPosition;\nattribute float aRadius;\nattribute vec3 aColor;\n\nuniform mat4 uView;\nuniform mat4 uProjection;\nuniform mat4 uModel;\nuniform float uAtomScale;\nuniform float uRelativeAtomScale;\nuniform float uAtomShade;\n\nvarying vec3 vColor;\nvarying vec3 vPosition;\nvarying float vRadius;\n\nvoid main() {\n    vRadius = uAtomScale * (1.0 + (aRadius - 1.0) * uRelativeAtomScale);\n    gl_Position = uProjection * uView * uModel * vec4(vRadius * aImposter + aPosition, 1.0);\n    vColor = mix(aColor, vec3(1,1,1), uAtomShade);\n    vPosition = vec3(uModel * vec4(aPosition, 1));\n}\n\n\n// __split__\n\n\n#version 100\n#extension GL_EXT_frag_depth: enable\nprecision highp float;\n\nuniform vec2 uBottomLeft;\nuniform vec2 uTopRight;\nuniform float uRes;\nuniform float uDepth;\nuniform int uMode;\n\nvarying vec3 vPosition;\nvarying float vRadius;\nvarying vec3 vColor;\n\nvec2 res = vec2(uRes, uRes);\n\nfloat raySphereIntersect(vec3 r0, vec3 rd) {\n    float a = dot(rd, rd);\n    vec3 s0_r0 = r0 - vPosition;\n    float b = 2.0 * dot(rd, s0_r0);\n    float c = dot(s0_r0, s0_r0) - (vRadius * vRadius);\n    float disc = b*b - 4.0*a*c;\n    if (disc <= 0.0) {\n        return -1.0;\n    }\n    return (-b - sqrt(disc))/(2.0*a);\n}\n\nvoid main() {\n    vec3 r0 = vec3(uBottomLeft + (gl_FragCoord.xy/res) * (uTopRight - uBottomLeft), 0.0);\n    vec3 rd = vec3(0, 0, -1);\n    float t = raySphereIntersect(r0, rd);\n    if (t < 0.0) {\n        discard;\n    }\n    vec3 coord = r0 + rd * t;\n    vec3 normal = normalize(coord - vPosition);\n    if (uMode == 0) {\n        gl_FragColor = vec4(vColor, 1);\n    } else if (uMode == 1) {\n        gl_FragColor = vec4(normal * 0.5 + 0.5, 1.0);\n    }\n    gl_FragDepthEXT = -coord.z/uDepth;\n}\n",Re="#version 100\nprecision highp float;\n\nattribute vec3 aImposter;\nattribute vec3 aPosA;\nattribute vec3 aPosB;\nattribute float aRadius;\nattribute float aRadA;\nattribute float aRadB;\nattribute vec3 aColA;\nattribute vec3 aColB;\n\nuniform mat4 uView;\nuniform mat4 uProjection;\nuniform mat4 uModel;\nuniform mat4 uRotation;\nuniform float uAtomScale;\nuniform float uRelativeAtomScale;\n\nvarying vec3 vNormal;\nvarying vec3 vPosA, vPosB;\nvarying float vRadA, vRadB;\nvarying vec3 vColA, vColB;\nvarying float vRadius;\n\nmat3 alignVector(vec3 a, vec3 b) {\n    vec3 v = cross(a, b);\n    float s = length(v);\n    float c = dot(a, b);\n    mat3 I = mat3(\n        1, 0, 0,\n        0, 1, 0,\n        0, 0, 1\n    );\n    mat3 vx = mat3(\n        0, v.z, -v.y,\n        -v.z, 0, v.x,\n        v.y, -v.x, 0\n    );\n    return I + vx + vx * vx * ((1.0 - c) / (s * s));\n}\n\nvoid main() {\n    vRadius = aRadius;\n    vec3 pos = vec3(aImposter);\n    // Scale the box in x and z to be bond-radius.\n    pos = pos * vec3(vRadius, 1, vRadius);\n    // Shift the origin-centered cube so that the bottom is at the origin.\n    pos = pos + vec3(0, 1, 0);\n    // Stretch the box in y so that it is the length of the bond.\n    pos = pos * vec3(1, length(aPosA - aPosB) * 0.5, 1);\n    // Find the rotation that aligns vec3(0, 1, 0) with vec3(uPosB - uPosA) and apply it.\n    vec3 a = normalize(vec3(-0.000001, 1.000001, 0.000001));\n    vec3 b = normalize(aPosB - aPosA);\n    mat3 R = alignVector(a, b);\n    pos = R * pos;\n    // Shift the cube so that the bottom is centered at the middle of atom A.\n    pos = pos + aPosA;\n\n    vec4 position = uModel * vec4(pos, 1);\n    gl_Position = uProjection * uView * position;\n    vPosA = aPosA;\n    vPosB = aPosB;\n    vRadA = uAtomScale * (1.0 + (aRadA - 1.0) * uRelativeAtomScale);\n    vRadB = uAtomScale * (1.0 + (aRadB - 1.0) * uRelativeAtomScale);\n    vColA = aColA;\n    vColB = aColB;\n}\n\n\n// __split__\n\n\n#version 100\n#extension GL_EXT_frag_depth: enable\nprecision highp float;\n\nuniform mat4 uRotation;\nuniform vec2 uBottomLeft;\nuniform vec2 uTopRight;\nuniform float uDepth;\nuniform float uRes;\nuniform float uBondShade;\nuniform int uMode;\n\nvarying vec3 vPosA, vPosB;\nvarying float vRadA, vRadB;\nvarying vec3 vColA, vColB;\nvarying float vRadius;\n\nmat3 alignVector(vec3 a, vec3 b) {\n    vec3 v = cross(a, b);\n    float s = length(v);\n    float c = dot(a, b);\n    mat3 I = mat3(\n        1, 0, 0,\n        0, 1, 0,\n        0, 0, 1\n    );\n    mat3 vx = mat3(\n        0, v.z, -v.y,\n        -v.z, 0, v.x,\n        v.y, -v.x, 0\n    );\n    return I + vx + vx * vx * ((1.0 - c) / (s * s));\n}\n\nvoid main() {\n\n    vec2 res = vec2(uRes, uRes);\n    vec3 r0 = vec3(uBottomLeft + (gl_FragCoord.xy/res) * (uTopRight - uBottomLeft), uDepth/2.0);\n    vec3 rd = vec3(0, 0, -1);\n\n    vec3 i = normalize(vPosB - vPosA);\n         i = vec3(uRotation * vec4(i, 0));\n    vec3 j = normalize(vec3(-0.000001, 1.000001, 0.000001));\n    mat3 R = alignVector(i, j);\n\n    vec3 r0p = r0 - vec3(uRotation * vec4(vPosA, 0));\n    r0p = R * r0p;\n    vec3 rdp = R * rd;\n\n    float a = dot(rdp.xz, rdp.xz);\n    float b = 2.0 * dot(rdp.xz, r0p.xz);\n    float c = dot(r0p.xz, r0p.xz) - vRadius*vRadius;\n    float disc = b*b - 4.0*a*c;\n    if (disc <= 0.0) {\n        discard;\n    }\n    float t = (-b - sqrt(disc))/(2.0*a);\n    if (t < 0.0) {\n        discard;\n    }\n\n    vec3 coord = r0p + rdp * t;\n    if (coord.y < 0.0 || coord.y > length(vPosA - vPosB)) {\n        discard;\n    }\n\n    vec3 color;\n    if (coord.y < vRadA + 0.5 * (length(vPosA - vPosB) - (vRadA + vRadB))) {\n        color = vColA;\n    } else {\n        color = vColB;\n    }\n\n    color = mix(color, vec3(1,1,1), uBondShade);\n\n    R = alignVector(j, i);\n    vec3 normal = normalize(R * vec3(coord.x, 0, coord.z));\n\n    coord = r0 + rd * t;\n    if (uMode == 0) {\n        gl_FragColor = vec4(color, 1);\n    } else if (uMode == 1) {\n        gl_FragColor = vec4(normal * 0.5 + 0.5, 1.0);\n    }\n    gl_FragDepthEXT = -(coord.z - uDepth/2.0)/uDepth;\n}\n",Ae="#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uTexture;\nuniform float uRes;\n\nvoid main() {\n    gl_FragColor = texture2D(uTexture, gl_FragCoord.xy/uRes);\n}\n",Te="#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uSceneDepth;\nuniform sampler2D uSceneNormal;\nuniform sampler2D uRandRotDepth;\nuniform sampler2D uAccumulator;\nuniform mat4 uRot;\nuniform mat4 uInvRot;\nuniform vec2 uSceneBottomLeft;\nuniform vec2 uSceneTopRight;\nuniform vec2 uRotBottomLeft;\nuniform vec2 uRotTopRight;\nuniform float uDepth;\nuniform float uRes;\nuniform int uSampleCount;\n\nvoid main() {\n\n    float dScene = texture2D(uSceneDepth, gl_FragCoord.xy/uRes).r;\n\n    vec3 r = vec3(uSceneBottomLeft + (gl_FragCoord.xy/uRes) * (uSceneTopRight - uSceneBottomLeft), 0.0);\n\n    r.z = -(dScene - 0.5) * uDepth;\n    r = vec3(uRot * vec4(r, 1));\n    float depth = -r.z/uDepth + 0.5;\n\n    vec2 p = (r.xy - uRotBottomLeft)/(uRotTopRight - uRotBottomLeft);\n\n    float dRandRot = texture2D(uRandRotDepth, p).r;\n\n    float ao = step(dRandRot, depth * 0.99);\n\n    vec3 normal = texture2D(uSceneNormal, gl_FragCoord.xy/uRes).rgb * 2.0 - 1.0;\n    vec3 dir = vec3(uInvRot * vec4(0, 0, 1, 0));\n    float mag = dot(dir, normal);\n    float sampled = step(0.0, mag);\n\n    ao *= sampled;\n\n    vec4 acc = texture2D(uAccumulator, gl_FragCoord.xy/uRes);\n\n    if (uSampleCount < 256) {\n        acc.r += ao/255.0;\n    } else if (uSampleCount < 512) {\n        acc.g += ao/255.0;\n    } else if (uSampleCount < 768) {\n        acc.b += ao/255.0;\n    } else {\n        acc.a += ao/255.0;\n    }\n        \n    gl_FragColor = acc;\n\n}\n",Ce="#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uSceneColor;\nuniform sampler2D uSceneDepth;\nuniform sampler2D uAccumulatorOut;\nuniform float uRes;\nuniform float uAO;\nuniform float uBrightness;\nuniform float uOutlineStrength;\n\nvoid main() {\n    vec2 p = gl_FragCoord.xy/uRes;\n    vec4 sceneColor = texture2D(uSceneColor, p);\n    if (uOutlineStrength > 0.0) {\n        float depth = texture2D(uSceneDepth, p).r;\n        float r = 1.0/511.0;\n        float d0 = abs(texture2D(uSceneDepth, p + vec2(-r,  0)).r - depth);\n        float d1 = abs(texture2D(uSceneDepth, p + vec2( r,  0)).r - depth);\n        float d2 = abs(texture2D(uSceneDepth, p + vec2( 0, -r)).r - depth);\n        float d3 = abs(texture2D(uSceneDepth, p + vec2( 0,  r)).r - depth);\n        float d = max(d0, d1);\n        d = max(d, d2);\n        d = max(d, d3);\n        sceneColor.rgb *= pow(1.0 - d, uOutlineStrength * 32.0);\n        sceneColor.a = max(step(0.003, d), sceneColor.a);\n    }\n    vec4 dAccum = texture2D(uAccumulatorOut, p);\n    float shade = max(0.0, 1.0 - (dAccum.r + dAccum.g + dAccum.b + dAccum.a) * 0.25 * uAO);\n    shade = pow(shade, 2.0);\n    gl_FragColor = vec4(uBrightness * sceneColor.rgb * shade, sceneColor.a);\n}\n",Pe="#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uTexture;\nuniform float uRes;\n\nvoid main() {\n    float FXAA_SPAN_MAX = 8.0;\n    float FXAA_REDUCE_MUL = 1.0/8.0;\n    float FXAA_REDUCE_MIN = 1.0/128.0;\n\n    vec2 texCoords = gl_FragCoord.xy/uRes;\n\n    vec4 rgbNW = texture2D(uTexture, texCoords + (vec2(-1.0, -1.0) / uRes));\n    vec4 rgbNE = texture2D(uTexture, texCoords + (vec2(1.0, -1.0) / uRes));\n    vec4 rgbSW = texture2D(uTexture, texCoords + (vec2(-1.0, 1.0) / uRes));\n    vec4 rgbSE = texture2D(uTexture, texCoords + (vec2(1.0, 1.0) / uRes));\n    vec4 rgbM  = texture2D(uTexture, texCoords);\n\n    vec4 luma = vec4(0.299, 0.587, 0.114, 1.0);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) * (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0/(min(abs(dir.x), abs(dir.y)) + dirReduce);\n\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX), max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX), dir * rcpDirMin)) / uRes;\n\n    vec4 rgbA = (1.0/2.0) * \n        (texture2D(uTexture, texCoords.xy + dir * (1.0/3.0 - 0.5)) + \n         texture2D(uTexture, texCoords.xy + dir * (2.0/3.0 - 0.5)));\n    vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * \n        (texture2D(uTexture, texCoords.xy + dir * (0.0/3.0 - 0.5)) +\n         texture2D(uTexture, texCoords.xy + dir * (3.0/3.0 - 0.5)));\n    float lumaB = dot(rgbB, luma);\n\n    if((lumaB < lumaMin) || (lumaB > lumaMax)){\n        gl_FragColor = rgbA;\n    } else {\n        gl_FragColor = rgbB;\n    }\n\n}",Le="#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uColor;\nuniform sampler2D uDepth;\nuniform float uRes;\nuniform float uDOFPosition;\nuniform float uDOFStrength;\nuniform int leftRight;\n\nvoid main() {\n\n    vec2 samples[64];\n    samples[0] = vec2(0.857612, 0.019885);\n    samples[1] = vec2(0.563809, -0.028071);\n    samples[2] = vec2(0.825599, -0.346856);\n    samples[3] = vec2(0.126584, -0.380959);\n    samples[4] = vec2(0.782948, 0.594322);\n    samples[5] = vec2(0.292148, -0.543265);\n    samples[6] = vec2(0.130700, 0.330220);\n    samples[7] = vec2(0.236088, 0.159604);\n    samples[8] = vec2(-0.305259, 0.810505);\n    samples[9] = vec2(0.269616, 0.923026);\n    samples[10] = vec2(0.484486, 0.371845);\n    samples[11] = vec2(-0.638057, 0.080447);\n    samples[12] = vec2(0.199629, 0.667280);\n    samples[13] = vec2(-0.861043, -0.370583);\n    samples[14] = vec2(-0.040652, -0.996174);\n    samples[15] = vec2(0.330458, -0.282111);\n    samples[16] = vec2(0.647795, -0.214354);\n    samples[17] = vec2(0.030422, -0.189908);\n    samples[18] = vec2(0.177430, -0.721124);\n    samples[19] = vec2(-0.461163, -0.327434);\n    samples[20] = vec2(-0.410012, -0.734504);\n    samples[21] = vec2(-0.616334, -0.626069);\n    samples[22] = vec2(0.590759, -0.726479);\n    samples[23] = vec2(-0.590794, 0.805365);\n    samples[24] = vec2(-0.924561, -0.163739);\n    samples[25] = vec2(-0.323028, 0.526960);\n    samples[26] = vec2(0.642128, 0.752577);\n    samples[27] = vec2(0.173625, -0.952386);\n    samples[28] = vec2(0.759014, 0.330311);\n    samples[29] = vec2(-0.360526, -0.032013);\n    samples[30] = vec2(-0.035320, 0.968156);\n    samples[31] = vec2(0.585478, -0.431068);\n    samples[32] = vec2(-0.244766, -0.906947);\n    samples[33] = vec2(-0.853096, 0.184615);\n    samples[34] = vec2(-0.089061, 0.104648);\n    samples[35] = vec2(-0.437613, 0.285308);\n    samples[36] = vec2(-0.654098, 0.379841);\n    samples[37] = vec2(-0.128663, 0.456572);\n    samples[38] = vec2(0.015980, -0.568170);\n    samples[39] = vec2(-0.043966, -0.771940);\n    samples[40] = vec2(0.346512, -0.071238);\n    samples[41] = vec2(-0.207921, -0.209121);\n    samples[42] = vec2(-0.624075, -0.189224);\n    samples[43] = vec2(-0.120618, 0.689339);\n    samples[44] = vec2(-0.664679, -0.410200);\n    samples[45] = vec2(0.371945, -0.880573);\n    samples[46] = vec2(-0.743251, 0.629998);\n    samples[47] = vec2(-0.191926, -0.413946);\n    samples[48] = vec2(0.449574, 0.833373);\n    samples[49] = vec2(0.299587, 0.449113);\n    samples[50] = vec2(-0.900432, 0.399319);\n    samples[51] = vec2(0.762613, -0.544796);\n    samples[52] = vec2(0.606462, 0.174233);\n    samples[53] = vec2(0.962185, -0.167019);\n    samples[54] = vec2(0.960990, 0.249552);\n    samples[55] = vec2(0.570397, 0.559146);\n    samples[56] = vec2(-0.537514, 0.555019);\n    samples[57] = vec2(0.108491, -0.003232);\n    samples[58] = vec2(-0.237693, -0.615428);\n    samples[59] = vec2(-0.217313, 0.261084);\n    samples[60] = vec2(-0.998966, 0.025692);\n    samples[61] = vec2(-0.418554, -0.527508);\n    samples[62] = vec2(-0.822629, -0.567797);\n    samples[63] = vec2(0.061945, 0.522105);\n\n    float invRes = 1.0/uRes;\n    vec2 coord = gl_FragCoord.xy * invRes;\n\n    float strength = uDOFStrength * uRes/768.0;\n\n    float depth = texture2D(uDepth, coord).r;\n    float range = uDOFPosition - depth;\n    float scale = abs(range);\n\n    vec4 sample = texture2D(uColor, coord);\n    float count = 1.0;\n    for(int i = 0; i < 64; i++) {\n        vec2 p = samples[i];\n        p = coord + scale * 64.0 * strength * p * invRes;\n        float d = texture2D(uDepth, p).r;\n        float r = uDOFPosition - d;\n        float s = abs(r);\n        sample += texture2D(uColor, p) * s;\n        count += s;\n    }\n\n    gl_FragColor = sample/count;\n}",Ne=(he={atoms:Fe,bonds:Re},_defineProperty(he,"bonds",Re),_defineProperty(he,"texturedquad",Ae),_defineProperty(he,"accumulator",Te),_defineProperty(he,"ao",Ce),_defineProperty(he,"fxaa",Pe),_defineProperty(he,"dof",Le),he),Ue=-1,Oe=1,ze=[Ue,Ue,Ue,Ue,Ue,Oe,Ue,Oe,Oe,Ue,Ue,Ue,Ue,Oe,Oe,Ue,Oe,Ue,Oe,Ue,Oe,Oe,Ue,Ue,Oe,Oe,Ue,Oe,Ue,Oe,Oe,Oe,Ue,Oe,Oe,Oe,Ue,Ue,Ue,Oe,Ue,Ue,Oe,Ue,Oe,Ue,Ue,Ue,Oe,Ue,Oe,Ue,Ue,Oe,Ue,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Ue,Ue,Oe,Oe,Oe,Oe,Ue,Ue,Oe,Ue,Oe,Ue,Ue,Ue,Ue,Ue,Ue,Oe,Ue,Oe,Ue,Ue,Ue,Oe,Ue,Oe,Oe,Ue,Ue,Ue,Oe,Oe,Ue,Oe,Oe,Oe,Oe,Ue,Ue,Oe,Oe,Oe,Oe,Ue,Oe,Oe],Be={Xx:{symbol:"Xx",name:"unknown",mass:1,radius:1,color:[1,.078,.576],number:0},H:{symbol:"H",name:"hydrogen",mass:1.00794,radius:.31,color:[1,1,1],number:1},He:{symbol:"He",name:"helium",mass:4.002602,radius:.28,color:[.851,1,1],number:2},Li:{symbol:"Li",name:"lithium",mass:6.941,radius:1.28,color:[.8,.502,1],number:3},Be:{symbol:"Be",name:"beryllium",mass:9.012182,radius:.96,color:[.761,1,0],number:4},B:{symbol:"B",name:"boron",mass:10.811,radius:.84,color:[1,.71,.71],number:5},C:{symbol:"C",name:"carbon",mass:12.0107,radius:.73,color:[.565,.565,.565],number:6},N:{symbol:"N",name:"nitrogen",mass:14.0067,radius:.71,color:[.188,.314,.973],number:7},O:{symbol:"O",name:"oxygen",mass:15.9994,radius:.66,color:[1,.051,.051],number:8},F:{symbol:"F",name:"fluorine",mass:18.9984032,radius:.57,color:[.565,.878,.314],number:9},Ne:{symbol:"Ne",name:"neon",mass:20.1797,radius:.58,color:[.702,.89,.961],number:10},Na:{symbol:"Na",name:"sodium",mass:22.98976928,radius:1.66,color:[.671,.361,.949],number:11},Mg:{symbol:"Mg",name:"magnesium",mass:24.305,radius:1.41,color:[.541,1,0],number:12},Al:{symbol:"Al",name:"aluminum",mass:26.9815386,radius:1.21,color:[.749,.651,.651],number:13},Si:{symbol:"Si",name:"silicon",mass:28.0855,radius:1.11,color:[.941,.784,.627],number:14},P:{symbol:"P",name:"phosphorus",mass:30.973762,radius:1.07,color:[1,.502,0],number:15},S:{symbol:"S",name:"sulfur",mass:32.065,radius:1.05,color:[1,1,.188],number:16},Cl:{symbol:"Cl",name:"chlorine",mass:35.453,radius:1.02,color:[.122,.941,.122],number:17},Ar:{symbol:"Ar",name:"argon",mass:39.948,radius:1.06,color:[.502,.82,.89],number:18},K:{symbol:"K",name:"potassium",mass:39.0983,radius:2.03,color:[.561,.251,.831],number:19},Ca:{symbol:"Ca",name:"calcium",mass:40.078,radius:1.76,color:[.239,1,0],number:20},Sc:{symbol:"Sc",name:"scandium",mass:44.955912,radius:1.7,color:[.902,.902,.902],number:21},Ti:{symbol:"Ti",name:"titanium",mass:47.867,radius:1.6,color:[.749,.761,.78],number:22},V:{symbol:"V",name:"vanadium",mass:50.9415,radius:1.53,color:[.651,.651,.671],number:23},Cr:{symbol:"Cr",name:"chromium",mass:51.9961,radius:1.39,color:[.541,.6,.78],number:24},Mn:{symbol:"Mn",name:"manganese",mass:54.938045,radius:1.39,color:[.611,.478,.78],number:25},Fe:{symbol:"Fe",name:"iron",mass:55.845,radius:1.32,color:[.878,.4,.2],number:26},Co:{symbol:"Co",name:"cobalt",mass:58.6934,radius:1.26,color:[.941,.565,.627],number:27},Ni:{symbol:"Ni",name:"nickel",mass:58.933195,radius:1.24,color:[.314,.816,.314],number:28},Cu:{symbol:"Cu",name:"copper",mass:63.546,radius:1.32,color:[.784,.502,.2],number:29},Zn:{symbol:"Zn",name:"zinc",mass:65.38,radius:1.22,color:[.49,.502,.69],number:30},Ga:{symbol:"Ga",name:"gallium",mass:69.723,radius:1.22,color:[.761,.561,.561],number:31},Ge:{symbol:"Ge",name:"germanium",mass:72.64,radius:1.2,color:[.4,.561,.561],number:32},As:{symbol:"As",name:"arsenic",mass:74.9216,radius:1.19,color:[.741,.502,.89],number:33},Se:{symbol:"Se",name:"selenium",mass:78.96,radius:1.2,color:[1,.631,0],number:34},Br:{symbol:"Br",name:"bromine",mass:79.904,radius:1.2,color:[.651,.161,.161],number:35},Kr:{symbol:"Kr",name:"krypton",mass:83.798,radius:1.16,color:[.361,.722,.82],number:36},Rb:{symbol:"Rb",name:"rubidium",mass:85.4678,radius:2.2,color:[.439,.18,.69],number:37},Sr:{symbol:"Sr",name:"strontium",mass:87.62,radius:1.95,color:[0,1,0],number:38},Y:{symbol:"Y",name:"yttrium",mass:88.90585,radius:1.9,color:[.58,1,1],number:39},Zr:{symbol:"Zr",name:"zirconium",mass:91.224,radius:1.75,color:[.58,.878,.878],number:40},Nb:{symbol:"Nb",name:"niobium",mass:92.90638,radius:1.64,color:[.451,.761,.788],number:41},Mo:{symbol:"Mo",name:"molybdenum",mass:95.96,radius:1.54,color:[.329,.71,.71],number:42},Tc:{symbol:"Tc",name:"technetium",mass:98,radius:1.47,color:[.231,.62,.62],number:43},Ru:{symbol:"Ru",name:"ruthenium",mass:101.07,radius:1.46,color:[.141,.561,.561],number:44},Rh:{symbol:"Rh",name:"rhodium",mass:102.9055,radius:1.42,color:[.039,.49,.549],number:45},Pd:{symbol:"Pd",name:"palladium",mass:106.42,radius:1.39,color:[0,.412,.522],number:46},Ag:{symbol:"Ag",name:"silver",mass:107.8682,radius:1.45,color:[.753,.753,.753],number:47},Cd:{symbol:"Cd",name:"cadmium",mass:112.411,radius:1.44,color:[1,.851,.561],number:48},In:{symbol:"In",name:"indium",mass:114.818,radius:1.42,color:[.651,.459,.451],number:49},Sn:{symbol:"Sn",name:"tin",mass:118.71,radius:1.39,color:[.4,.502,.502],number:50},Sb:{symbol:"Sb",name:"antimony",mass:121.76,radius:1.39,color:[.62,.388,.71],number:51},Te:{symbol:"Te",name:"tellurium",mass:127.6,radius:1.38,color:[.831,.478,0],number:52},I:{symbol:"I",name:"iodine",mass:126.9047,radius:1.39,color:[.58,0,.58],number:53},Xe:{symbol:"Xe",name:"xenon",mass:131.293,radius:1.4,color:[.259,.62,.69],number:54},Cs:{symbol:"Cs",name:"cesium",mass:132.9054519,radius:2.44,color:[.341,.09,.561],number:55},Ba:{symbol:"Ba",name:"barium",mass:137.327,radius:2.15,color:[0,.788,0],number:56},La:{symbol:"La",name:"lanthanum",mass:138.90547,radius:2.07,color:[.439,.831,1],number:57},Ce:{symbol:"Ce",name:"cerium",mass:140.116,radius:2.04,color:[1,1,.78],number:58},Pr:{symbol:"Pr",name:"praseodymium",mass:140.90765,radius:2.03,color:[.851,1,.78],number:59},Nd:{symbol:"Nd",name:"neodymium",mass:144.242,radius:2.01,color:[.78,1,.78],number:60},Pm:{symbol:"Pm",name:"promethium",mass:145,radius:1.99,color:[.639,1,.78],number:61},Sm:{symbol:"Sm",name:"samarium",mass:150.36,radius:1.98,color:[.561,1,.78],number:62},Eu:{symbol:"Eu",name:"europium",mass:151.964,radius:1.98,color:[.38,1,.78],number:63},Gd:{symbol:"Gd",name:"gadolinium",mass:157.25,radius:1.96,color:[.271,1,.78],number:64},Tb:{symbol:"Tb",name:"terbium",mass:158.92535,radius:1.94,color:[.189,1,.78],number:65},Dy:{symbol:"Dy",name:"dysprosium",mass:162.5,radius:1.92,color:[.122,1,.78],number:66},Ho:{
symbol:"Ho",name:"holmium",mass:164.93032,radius:1.92,color:[0,1,.612],number:67},Er:{symbol:"Er",name:"erbium",mass:167.259,radius:1.89,color:[0,.902,.459],number:68},Tm:{symbol:"Tm",name:"thulium",mass:168.93421,radius:1.9,color:[0,.831,.322],number:69},Yb:{symbol:"Yb",name:"ytterbium",mass:173.054,radius:1.87,color:[0,.749,.22],number:70},Lu:{symbol:"Lu",name:"lutetium",mass:174.9668,radius:1.87,color:[0,.671,.141],number:71},Hf:{symbol:"Hf",name:"hafnium",mass:178.49,radius:1.75,color:[.302,.761,1],number:72},Ta:{symbol:"Ta",name:"tantalum",mass:180.94788,radius:1.7,color:[.302,.651,1],number:73},W:{symbol:"W",name:"tungsten",mass:183.84,radius:1.62,color:[.129,.58,.839],number:74},Re:{symbol:"Re",name:"rhenium",mass:186.207,radius:1.51,color:[.149,.49,.671],number:75},Os:{symbol:"Os",name:"osmium",mass:190.23,radius:1.44,color:[.149,.4,.588],number:76},Ir:{symbol:"Ir",name:"iridium",mass:192.217,radius:1.41,color:[.09,.329,.529],number:77},Pt:{symbol:"Pt",name:"platinum",mass:195.084,radius:1.36,color:[.816,.816,.878],number:78},Au:{symbol:"Au",name:"gold",mass:196.966569,radius:1.36,color:[1,.82,.137],number:79},Hg:{symbol:"Hg",name:"mercury",mass:200.59,radius:1.32,color:[.722,.722,.816],number:80},Tl:{symbol:"Tl",name:"thallium",mass:204.3833,radius:1.45,color:[.651,.329,.302],number:81},Pb:{symbol:"Pb",name:"lead",mass:207.2,radius:1.46,color:[.341,.349,.38],number:82},Bi:{symbol:"Bi",name:"bismuth",mass:208.9804,radius:1.48,color:[.62,.31,.71],number:83},Po:{symbol:"Po",name:"polonium",mass:210,radius:1.4,color:[.671,.361,0],number:84},At:{symbol:"At",name:"astatine",mass:210,radius:1.5,color:[.459,.31,.271],number:85},Rn:{symbol:"Rn",name:"radon",mass:220,radius:1.5,color:[.259,.51,.588],number:86},Fr:{symbol:"Fr",name:"francium",mass:223,radius:2.6,color:[.259,0,.4],number:87},Ra:{symbol:"Ra",name:"radium",mass:226,radius:2.21,color:[0,.49,0],number:88},Ac:{symbol:"Ac",name:"actinium",mass:227,radius:2.15,color:[.439,.671,.98],number:89},Th:{symbol:"Th",name:"thorium",mass:231.03588,radius:2.06,color:[0,.729,1],number:90},Pa:{symbol:"Pa",name:"protactinium",mass:232.03806,radius:2,color:[0,.631,1],number:91},U:{symbol:"U",name:"uranium",mass:237,radius:1.96,color:[0,.561,1],number:92},Np:{symbol:"Np",name:"neptunium",mass:238.02891,radius:1.9,color:[0,.502,1],number:93},Pu:{symbol:"Pu",name:"plutonium",mass:243,radius:1.87,color:[0,.42,1],number:94},Am:{symbol:"Am",name:"americium",mass:244,radius:1.8,color:[.329,.361,.949],number:95},Cm:{symbol:"Cm",name:"curium",mass:247,radius:1.69,color:[.471,.361,.89],number:96},Bk:{symbol:"Bk",name:"berkelium",mass:247,radius:1.66,color:[.541,.31,.89],number:97},Cf:{symbol:"Cf",name:"californium",mass:251,radius:1.68,color:[.631,.212,.831],number:98},Es:{symbol:"Es",name:"einsteinium",mass:252,radius:1.65,color:[.702,.122,.831],number:99},Fm:{symbol:"Fm",name:"fermium",mass:257,radius:1.67,color:[.702,.122,.729],number:100},Md:{symbol:"Md",name:"mendelevium",mass:258,radius:1.73,color:[.702,.051,.651],number:101},No:{symbol:"No",name:"nobelium",mass:259,radius:1.76,color:[.741,.051,.529],number:102},Lr:{symbol:"Lr",name:"lawrencium",mass:262,radius:1.61,color:[.78,0,.4],number:103},Rf:{symbol:"Rf",name:"rutherfordium",mass:261,radius:1.57,color:[.8,0,.349],number:104},Db:{symbol:"Db",name:"dubnium",mass:262,radius:1.49,color:[.82,0,.31],number:105},Sg:{symbol:"Sg",name:"seaborgium",mass:266,radius:1.43,color:[.851,0,.271],number:106},Bh:{symbol:"Bh",name:"bohrium",mass:264,radius:1.41,color:[.878,0,.22],number:107},Hs:{symbol:"Hs",name:"hassium",mass:277,radius:1.34,color:[.902,0,.18],number:108},Mt:{symbol:"Mt",name:"meitnerium",mass:268,radius:1.29,color:[.922,0,.149],number:109},Ds:{symbol:"Ds",name:"Ds",mass:271,radius:1.28,color:[.922,0,.149],number:110},Uuu:{symbol:"Uuu",name:"Uuu",mass:272,radius:1.21,color:[.922,0,.149],number:111},Uub:{symbol:"Uub",name:"Uub",mass:285,radius:1.22,color:[.922,0,.149],number:112},Uut:{symbol:"Uut",name:"Uut",mass:284,radius:1.36,color:[.922,0,.149],number:113},Uuq:{symbol:"Uuq",name:"Uuq",mass:289,radius:1.43,color:[.922,0,.149],number:114},Uup:{symbol:"Uup",name:"Uup",mass:288,radius:1.62,color:[.922,0,.149],number:115},Uuh:{symbol:"Uuh",name:"Uuh",mass:292,radius:1.75,color:[.922,0,.149],number:116},Uus:{symbol:"Uus",name:"Uus",mass:294,radius:1.65,color:[.922,0,.149],number:117},Uuo:{symbol:"Uuo",name:"Uuo",mass:296,radius:1.57,color:[.922,0,.149],number:118}},ke=1/0,He=-(1/0);for(var je in Be)Be.hasOwnProperty(je)&&(ke=Math.min(ke,Be[je].radius),He=Math.max(He,Be[je].radius));var qe=Object.create(HTMLElement.prototype);qe.createdCallback=function(){this.style.display="inline-block";var e=Math.min(this.clientWidth,this.clientHeight);e<100&&(e=100);var t=document.createElement("canvas");t.width=e,t.height=e,t.style.cssText="display: block; margin: auto;",this.appendChild(t),this._view=V(),this._view.resolution=e,this._state={needReset:!1,lastX:0,lastY:0,buttonDown:!1},fe(this),this._renderer=new me(t,this._view.resolution,this._view.aoRes),this._renderer.setResolution(this._view.resolution,this._view.aoRes),this._system=ne(),this.hasAttribute("lattice")?this._view.lattice=!0:this._view.lattice=!1,this.hasAttribute("bonds")?(this._view.bonds=!0,this._view=q(this._view,Ee.atomsbonds)):this._view.bonds=!1,J(this._view),this.hasAttribute("src")&&this.readStructure(this.getAttribute("src"),this.getAttribute("format"))},qe.readStructure=function(e,t){var n=e.split(".").slice(-1)[0];if(t&&["xyz"].indexOf(t)>=0)n=t;else if(t)throw"Unrecognized structure format: "+t;var o=this;if("xyz"!==n)throw"Unrecognized filename extension for src!";X(e,function(e){var t=N(e)[0];o.loadStructure({atoms:t})},function(){throw"Unable to load file from url"})},qe.loadStructure=function(e){this._system=ne();for(var t=1/0,n=1/0,o=1/0,r=-(1/0),a=-(1/0),i=-(1/0),s=0;s<e.atoms.length;s++){var l=e.atoms[s],u=l.position[0],m=l.position[1],c=l.position[2];u<t&&(t=u),m<n&&(n=m),c<o&&(o=c),u>r&&(r=u),m>a&&(a=m),c>i&&(i=c),ae(this._system,l.symbol,u,m,c)}if(e.lattice){var d=e.lattice;this._system.lattice.matrix=f(d[0],d[1],d[2],0,d[3],d[4],d[5],0,d[6],d[7],d[8],0,0,0,0,1)}else this._system.lattice.matrix=f(r-t,0,0,t,0,a-n,0,n,0,0,i-o,o,0,0,0,1);se(this._system),this._view.lattice&&oe(this._system),this._view.bonds&&re(this._system),this._renderer.setSystem(this._system,this._view),G(this._view,this._system),this._state.needReset=!0,de(this)},qe.attributeChangedCallback=function(e,t,n){"bonds"===e?(this.hasAttribute("bonds")?(re(this._system),this._view.bonds=!0,this._view=q(this._view,Ee.atomsbonds)):(this._view.bonds=!1,this._view=q(this._view,Ee.atoms)),J(this._view),this._renderer.setSystem(this._system,this._view),this._state.needReset=!0):"lattice"===e?(this.hasAttribute("lattice")?(oe(this._system),this._view.lattice=!0):this._view.lattice=!1,J(this._view),this._renderer.setSystem(this._system,this._view),this._state.needReset=!0):"src"===e&&this.hasAttribute("src")&&this.readStructure(this.getAttribute("src"),this.getAttribute("format"))};document.registerElement("structure-view",{prototype:qe})});